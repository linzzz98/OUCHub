Volatile
====================

1. 线程安全要考虑三个方面：可见性、有序性、原子性

* 可见性指，一个线程对共享变量修改，另一个线程能看到最新的结果

* 有序性指，一个线程内代码按编写顺序执行

* 原子性指，一个线程内多行代码以一个整体运行，期间不能有其他线程的代码插队

.. note::

   Volatile可以保证共享变量的可见性与有序性，但不能保证原子性


.. important::

   内存屏障：

   写变量的时候，要先写volatile修饰的变量

   读变量的时候，最后读volatile修饰的变量



