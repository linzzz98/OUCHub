<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>基础篇 &mdash; OUCHub  文档</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/twemoji.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="../../../../_static/twemoji.js"></script>
        <script src="../../../../_static/translations.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="next" title="SSM" href="../../ssm/ssm.html" />
    <link rel="prev" title="🍑 Algorithm" href="../mysql.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
            <a href="../../../../index.html" class="icon icon-home"> OUCHub
            <img src="../../../../_static/logo_1.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">基础知识</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge/k_MH.html">💊 Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge/k_CV.html">🍤 Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge/k_ML.html">🍎 Machine Learning</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">论文学习</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../paper/p_sfm.html">🍊 Structure from Motion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../paper/p_slam.html">🍊 SLAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../paper/p_pointcloud.html">🍋 Point Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../paper/p_BA.html">🍊 Bundle Adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../paper/p_others.html">🍒 Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">源码解析</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../code/colmap.html">🍑 Colmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code/theiasfm.html">🍑 TheiaSfM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../code/ba.html">🍑 Bundle Adjustment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">算法学习</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../algorithm/algorithm.html">🍑 Algorithm</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工作知识</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../work.html">🍑 Work</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../mysql.html">🍑 Algorithm</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">基础篇</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">通用语法及分类</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ddl">DDL（数据定义语言）</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id3">数据库操作</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id4">表操作</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#dml">DML（数据操作语言）</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id5">添加数据</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id6">更新和删除数据</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#dql">DQL（数据查询语言）</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id7">基础查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id8">条件查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id9">聚合查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id10">分组查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id11">排序查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id12">分页查询</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#dcl">DCL</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id13">管理用户</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id14">权限控制</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id15">函数</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id16">字符串函数</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id17">数值函数</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id18">日期函数</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id19">流程函数</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id20">约束</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id21">分类</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id22">常用约束</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id23">外键约束</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id24">删除/更新行为</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id25">多表查询</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id26">多表关系</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id27">查询</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id28">内连接查询</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id29">外连接查询</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id30">自连接查询</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id31">联合查询</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id32">子查询</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id33">标量子查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id34">列子查询</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id35">行子查询</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ssm/ssm.html">SSM</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">杂七杂八</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../others/o_others.html">🍺 Others</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">OUCHub</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../work.html">🍑 Work</a> &raquo;</li>
          <li><a href="../mysql.html">🍑 Algorithm</a> &raquo;</li>
      <li>基础篇</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/pages/work/mysql/basic/basic.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>基础篇<a class="headerlink" href="#id1" title="永久链接至标题"></a></h1>
<section id="id2">
<h2>通用语法及分类<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p><strong>DDL</strong>: 数据 <strong>定义</strong> 语言，用来 <strong>定义数据库对象</strong> （数据库、表、字段）</p></li>
<li><p><strong>DML</strong>: 数据 <strong>操作</strong> 语言，用来对数据库表中的数据进行 <strong>增删改</strong></p></li>
<li><p><strong>DQL</strong>: 数据 <strong>查询</strong> 语言，用来 <strong>查询</strong> 数据库中表的记录</p></li>
<li><p><strong>DCL</strong>: 数据 <strong>控制</strong> 语言，用来 <strong>创建数据库用户、控制数据库的控制权限</strong></p></li>
</ul>
<section id="ddl">
<h3>DDL（数据定义语言）<a class="headerlink" href="#ddl" title="永久链接至标题"></a></h3>
<section id="id3">
<h4>数据库操作<a class="headerlink" href="#id3" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>查询所有数据库：</p>
<p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">DATABASES;</span></code></p>
</li>
<li><p>查询当前数据库</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">DATABASE();</span></code></p>
</li>
<li><p>创建数据库</p>
<p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">[</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span> <span class="pre">]</span> <span class="pre">数据库名</span> <span class="pre">[</span> <span class="pre">DEFAULT</span> <span class="pre">CHARSET</span> <span class="pre">字符集]</span> <span class="pre">[COLLATE</span> <span class="pre">排序规则</span> <span class="pre">];</span></code></p>
</li>
<li><p>删除数据库</p>
<p><code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">DATABASE</span> <span class="pre">[</span> <span class="pre">IF</span> <span class="pre">EXISTS</span> <span class="pre">]</span> <span class="pre">数据库名;</span></code></p>
</li>
<li><p>使用数据库</p>
<p><code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">数据库名;</span></code></p>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>UTF8字符集长度为3字节。因为有些符号占4字节，所以推荐用 <strong>utf8mb4</strong> 字符集</p>
</div>
</section>
<section id="id4">
<h4>表操作<a class="headerlink" href="#id4" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>查询当前数据库所有表</p>
<p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">TABLES;</span></code></p>
</li>
<li><p>查询表结构</p>
<p><code class="docutils literal notranslate"><span class="pre">DESC</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>查询指定表的建表语句</p>
<p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>创建表</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">表名</span><span class="p">(</span>
   <span class="n">字段1</span> <span class="n">字段1类型</span> <span class="p">[</span><span class="n">COMMENT</span> <span class="n">字段1注释</span><span class="p">],</span>
   <span class="n">字段2</span> <span class="n">字段2类型</span> <span class="p">[</span><span class="n">COMMENT</span> <span class="n">字段2注释</span><span class="p">],</span>
   <span class="n">字段3</span> <span class="n">字段3类型</span> <span class="p">[</span><span class="n">COMMENT</span> <span class="n">字段3注释</span><span class="p">],</span>
   <span class="o">...</span>
   <span class="n">字段n</span> <span class="n">字段n类型</span> <span class="p">[</span><span class="n">COMMENT</span> <span class="n">字段n注释</span><span class="p">]</span>
<span class="p">)[</span> <span class="n">COMMENT</span> <span class="n">表注释</span> <span class="p">];</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><strong>最后一个字段后面没有逗号</strong></p>
</div>
</li>
<li><p>添加字段</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">表名</span> <span class="pre">ADD</span> <span class="pre">字段名</span> <span class="pre">类型(长度)</span> <span class="pre">[COMMENT</span> <span class="pre">注释]</span> <span class="pre">[约束];</span></code></p>
<p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">emp</span> <span class="k">ADD</span> <span class="n">nickname</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">&#39;昵称&#39;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>修改数据类型</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">表名</span> <span class="pre">MODIFY</span> <span class="pre">字段名</span> <span class="pre">新数据类型(长度);</span></code></p>
</li>
<li><p>修改字段名和字段类型</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">表名</span> <span class="pre">CHANGE</span> <span class="pre">旧字段名</span> <span class="pre">新字段名</span> <span class="pre">类型(长度)</span> <span class="pre">[COMMENT</span> <span class="pre">注释]</span> <span class="pre">[约束];</span></code></p>
<p>e.g. 将emp表的nickname字段修改为username，类型为varchar(30)</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">emp</span> <span class="n">CHANGE</span> <span class="n">nickname</span> <span class="n">username</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">COMMENT</span> <span class="s1">&#39;昵称&#39;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>删除字段</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">表名</span> <span class="pre">DROP</span> <span class="pre">字段名;</span></code></p>
</li>
<li><p>修改表名</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">表名</span> <span class="pre">RENAME</span> <span class="pre">TO</span> <span class="pre">新表名</span></code></p>
</li>
<li><p>删除表</p></li>
</ol>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span> <span class="pre">[IF</span> <span class="pre">EXISTS]</span> <span class="pre">表名;</span></code></p>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>删除表，并重新创建该表</p></li>
</ol>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">TRUNCATE</span> <span class="pre">TABLE</span> <span class="pre">表名;</span></code></p>
</div></blockquote>
</section>
</section>
<section id="dml">
<h3>DML（数据操作语言）<a class="headerlink" href="#dml" title="永久链接至标题"></a></h3>
<section id="id5">
<h4>添加数据<a class="headerlink" href="#id5" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>指定字段</p>
<p><code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">表名</span> <span class="pre">(字段名1,</span> <span class="pre">字段名2,</span> <span class="pre">...)</span> <span class="pre">VALUES</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...);</span></code></p>
</li>
<li><p>全部字段</p>
<p><code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">表名</span> <span class="pre">VALUES</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...);</span></code></p>
</li>
<li><p>批量添加数据</p>
<p><code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">表名</span> <span class="pre">(字段名1,</span> <span class="pre">字段名2,</span> <span class="pre">...)</span> <span class="pre">VALUES</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...),</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...),</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...);</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">表名</span> <span class="pre">VALUES</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...),</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...),</span> <span class="pre">(值1,</span> <span class="pre">值2,</span> <span class="pre">...);</span></code></p>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>字符串和日期类型数据应该包含在引号中</p></li>
<li><p>插入的数据大小应该在字段的规定范围内</p></li>
</ul>
</div>
</section>
<section id="id6">
<h4>更新和删除数据<a class="headerlink" href="#id6" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>修改数据</p>
<p><code class="docutils literal notranslate"><span class="pre">UPDATE</span> <span class="pre">表名</span> <span class="pre">SET</span> <span class="pre">字段名1</span> <span class="pre">=</span> <span class="pre">值1,</span> <span class="pre">字段名2</span> <span class="pre">=</span> <span class="pre">值2,</span> <span class="pre">...</span> <span class="pre">[</span> <span class="pre">WHERE</span> <span class="pre">条件</span> <span class="pre">];</span></code></p>
<p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="n">emp</span> <span class="k">SET</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Jack&#39;</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>删除数据</p>
<p><code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">[</span> <span class="pre">WHERE</span> <span class="pre">条件</span> <span class="pre">];</span></code></p>
</li>
</ol>
</section>
</section>
<section id="dql">
<h3>DQL（数据查询语言）<a class="headerlink" href="#dql" title="永久链接至标题"></a></h3>
<p><strong>语法</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span>
   <span class="n">字段列表</span>
<span class="n">FROM</span>
   <span class="n">表名字段</span>
<span class="n">WHERE</span>
   <span class="n">条件列表</span>
<span class="n">GROUP</span> <span class="n">BY</span>
   <span class="n">分组字段列表</span>
<span class="n">HAVING</span>
   <span class="n">分组后的条件列表</span>
<span class="n">ORDER</span> <span class="n">BY</span>
   <span class="n">排序字段列表</span>
<span class="n">LIMIT</span>
   <span class="n">分页参数</span>
</pre></div>
</div>
<section id="id7">
<h4>基础查询<a class="headerlink" href="#id7" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>查询多个字段</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段1,</span> <span class="pre">字段2,</span> <span class="pre">字段3,</span> <span class="pre">...</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>设置别名</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段1</span> <span class="pre">[</span> <span class="pre">AS</span> <span class="pre">别名1</span> <span class="pre">],</span> <span class="pre">字段2</span> <span class="pre">[</span> <span class="pre">AS</span> <span class="pre">别名2</span> <span class="pre">],</span> <span class="pre">字段3</span> <span class="pre">[</span> <span class="pre">AS</span> <span class="pre">别名3</span> <span class="pre">],</span> <span class="pre">...</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段1</span> <span class="pre">[</span> <span class="pre">别名1</span> <span class="pre">],</span> <span class="pre">字段2</span> <span class="pre">[</span> <span class="pre">别名2</span> <span class="pre">],</span> <span class="pre">字段3</span> <span class="pre">[</span> <span class="pre">别名3</span> <span class="pre">],</span> <span class="pre">...</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>去除重复记录</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>转义</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">WHERE</span> <span class="pre">name</span> <span class="pre">LIKE</span> <span class="pre">'/_张三'</span> <span class="pre">ESCAPE</span> <span class="pre">'/'</span></code></p>
<p>/ 之后的_不作为通配符</p>
</li>
</ol>
</section>
<section id="id8">
<h4>条件查询<a class="headerlink" href="#id8" title="永久链接至标题"></a></h4>
<p><strong>语法</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">WHERE</span> <span class="pre">条件列表;</span></code></p>
</div></blockquote>
<p><strong>条件</strong></p>
<ol class="arabic">
<li><p>比较运算符</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>比较运算符</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&gt;</p></td>
<td><p>大于</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;=</p></td>
<td><p>大于等于</p></td>
</tr>
<tr class="row-even"><td><p>&lt;</p></td>
<td><p>小于</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;=</p></td>
<td><p>小于等于</p></td>
</tr>
<tr class="row-even"><td><p>=</p></td>
<td><p>等于</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;&gt; 或 !=</p></td>
<td><p>不等于</p></td>
</tr>
<tr class="row-even"><td><p>BETWEEN … AND …</p></td>
<td><p>在某个范围内（含最小、最大值）</p></td>
</tr>
<tr class="row-odd"><td><p>IN(…)</p></td>
<td><p>在in之后的列表中的值，多选一</p></td>
</tr>
<tr class="row-even"><td><p>LIKE 占位符</p></td>
<td><p>模糊匹配 <strong>（_匹配单个字符，%匹配任意个字符）</strong></p></td>
</tr>
<tr class="row-odd"><td><p>IS NULL</p></td>
<td><p>是NULL</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>逻辑运算符</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>逻辑运算符</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AND 或 &amp;&amp;</p></td>
<td><p>并且（多个条件同时成立）</p></td>
</tr>
<tr class="row-odd"><td><p>OR 或 ||</p></td>
<td><p>或者（多个条件任意一个成立）</p></td>
</tr>
<tr class="row-even"><td><p>NOT 或 !</p></td>
<td><p>非，不是</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 年龄等于30</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>

<span class="c1">-- 年龄小于30</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">;</span>

<span class="c1">-- 小于等于</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">;</span>

<span class="c1">-- 没有身份证</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">idcard</span> <span class="k">is</span> <span class="k">null</span> <span class="k">or</span> <span class="n">idcard</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="c1">-- 有身份证</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">idcard</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">idcard</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span><span class="p">;</span>

<span class="c1">-- 不等于</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">!=</span> <span class="mi">30</span><span class="p">;</span>

<span class="c1">-- 年龄在20到30之间</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="k">between</span> <span class="mi">20</span> <span class="k">and</span> <span class="mi">30</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">20</span> <span class="k">and</span> <span class="n">age</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">;</span>

<span class="c1">-- 下面语句不报错，但查不到任何信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="k">between</span> <span class="mi">30</span> <span class="k">and</span> <span class="mi">20</span><span class="p">;</span>

<span class="c1">-- 性别为女且年龄小于30</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">30</span> <span class="k">and</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">&#39;女&#39;</span><span class="p">;</span>

<span class="c1">-- 年龄等于25或30或35</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">25</span> <span class="k">or</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">30</span> <span class="k">or</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">35</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="k">in</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">);</span>

<span class="c1">-- 姓名为两个字</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">name</span> <span class="k">like</span> <span class="s1">&#39;__&#39;</span><span class="p">;</span>

<span class="c1">-- 身份证最后为X</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">idcard</span> <span class="k">like</span> <span class="s1">&#39;%X&#39;</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id9">
<h4>聚合查询<a class="headerlink" href="#id9" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>常见聚合函数：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>count</p></td>
<td><p>统计数量</p></td>
</tr>
<tr class="row-odd"><td><p>max</p></td>
<td><p>最大值</p></td>
</tr>
<tr class="row-even"><td><p>min</p></td>
<td><p>最小值</p></td>
</tr>
<tr class="row-odd"><td><p>avg</p></td>
<td><p>平均值</p></td>
</tr>
<tr class="row-even"><td><p>sum</p></td>
<td><p>求和</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>语法：</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">聚合函数(字段列表)</span> <span class="pre">FROM</span> <span class="pre">表名;</span></code></p>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">workaddress</span> <span class="o">=</span> <span class="ss">&quot;广东省&quot;</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id10">
<h4>分组查询<a class="headerlink" href="#id10" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>语法：</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">[</span> <span class="pre">WHERE</span> <span class="pre">条件</span> <span class="pre">]</span> <span class="pre">GROUP</span> <span class="pre">BY</span> <span class="pre">分组字段名</span> <span class="pre">[</span> <span class="pre">HAVING</span> <span class="pre">分组后的过滤条件</span> <span class="pre">];</span></code></p>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 根据性别分组，统计男性和女性数量（只显示分组数量，不显示哪个是男哪个是女）</span>
<span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">group</span> <span class="k">by</span> <span class="n">gender</span><span class="p">;</span>

<span class="c1">-- 根据性别分组，统计男性和女性数量</span>
<span class="k">select</span> <span class="n">gender</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">group</span> <span class="k">by</span> <span class="n">gender</span><span class="p">;</span>

<span class="c1">-- 根据性别分组，统计男性和女性的平均年龄</span>
<span class="k">select</span> <span class="n">gender</span><span class="p">,</span> <span class="k">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">group</span> <span class="k">by</span> <span class="n">gender</span><span class="p">;</span>

<span class="c1">-- 年龄小于45，并根据工作地址分组</span>
<span class="k">select</span> <span class="n">workaddress</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">45</span> <span class="k">group</span> <span class="k">by</span> <span class="n">workaddress</span><span class="p">;</span>

<span class="c1">-- 年龄小于45，并根据工作地址分组，获取员工数量大于等于3的工作地址</span>
<span class="k">select</span> <span class="n">workaddress</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">address_count</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">45</span> <span class="k">group</span> <span class="k">by</span> <span class="n">workaddress</span> <span class="k">having</span> <span class="n">address_count</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>where 和 having 的区别：</p>
<ul class="simple">
<li><p>执行时机不同：where是分组之前进行过滤，不满足where条件不参与分组；having是分组后对结果进行过滤。</p></li>
<li><p>判断条件不同：where不能对聚合函数进行判断，而having可以。</p></li>
</ul>
<p>注意：</p>
<ul class="simple">
<li><p>执行顺序：where &gt; 聚合函数 &gt; having</p></li>
<li><p>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</p></li>
</ul>
</div>
</section>
<section id="id11">
<h4>排序查询<a class="headerlink" href="#id11" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>语法</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">ORDER</span> <span class="pre">BY</span> <span class="pre">字段1</span> <span class="pre">排序方式1,</span> <span class="pre">字段2</span> <span class="pre">排序方式2;</span></code></p>
</li>
<li><p>排序方式</p>
<ul class="simple">
<li><p>ASC: 升序（默认）</p></li>
<li><p>DESC: 降序</p></li>
</ul>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 根据年龄升序排序</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">age</span> <span class="k">ASC</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">age</span><span class="p">;</span>

<span class="c1">-- 两字段排序，根据年龄升序排序，入职时间降序排序</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">age</span> <span class="k">ASC</span><span class="p">,</span> <span class="n">entrydate</span> <span class="k">DESC</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序</p>
</div>
</section>
<section id="id12">
<h4>分页查询<a class="headerlink" href="#id12" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>语法</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表名</span> <span class="pre">LIMIT</span> <span class="pre">起始索引,</span> <span class="pre">查询记录数;</span></code></p>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询第一页数据，展示10条</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">LIMIT</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">;</span>

<span class="c1">-- 查询第二页</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>起始索引从0开始，起始索引 = （查询页码 - 1） * 每页显示记录数</p></li>
<li><p>分页查询是数据库的方言，不同数据库有不同实现，MySQL是LIMIT</p></li>
<li><p>如果查询的是第一页数据，起始索引可以省略，直接简写 LIMIT 10</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><strong>DQL执行顺序</strong></p>
<p>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT</p>
</div>
</section>
</section>
<section id="dcl">
<h3>DCL<a class="headerlink" href="#dcl" title="永久链接至标题"></a></h3>
<section id="id13">
<h4>管理用户<a class="headerlink" href="#id13" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>查询用户</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">USER</span> <span class="n">mysql</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">user</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>创建用户</p>
<p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">USER</span> <span class="pre">'用户名'&#64;'主机名'</span> <span class="pre">IDENTIFIED</span> <span class="pre">BY</span> <span class="pre">'密码';</span></code></p>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>主机名可以使用 % 通配</p>
</div>
<ol class="arabic" start="3">
<li><p>修改用户密码</p>
<p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">USER</span> <span class="pre">'用户名'&#64;'主机名'</span> <span class="pre">IDENTIFIED</span> <span class="pre">WITH</span> <span class="pre">mysql_native_password</span> <span class="pre">BY</span> <span class="pre">'新密码';</span></code></p>
</li>
<li><p>删除用户</p>
<p><code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">USER</span> <span class="pre">'用户名'&#64;'主机名';</span></code></p>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 创建用户test，只能在当前主机localhost访问</span>
<span class="k">create</span> <span class="k">user</span> <span class="s1">&#39;test&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">identified</span> <span class="k">by</span> <span class="s1">&#39;123456&#39;</span><span class="p">;</span>

<span class="c1">-- 创建用户test，能在任意主机访问</span>
<span class="k">create</span> <span class="k">user</span> <span class="s1">&#39;test&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">identified</span> <span class="k">by</span> <span class="s1">&#39;123456&#39;</span><span class="p">;</span>
<span class="k">create</span> <span class="k">user</span> <span class="s1">&#39;test&#39;</span> <span class="n">identified</span> <span class="k">by</span> <span class="s1">&#39;123456&#39;</span><span class="p">;</span>

<span class="c1">-- 修改密码</span>
<span class="k">alter</span> <span class="k">user</span> <span class="s1">&#39;test&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">identified</span> <span class="k">with</span> <span class="n">mysql_native_password</span> <span class="k">by</span> <span class="s1">&#39;1234&#39;</span><span class="p">;</span>

<span class="c1">-- 删除用户</span>
<span class="k">drop</span> <span class="k">user</span> <span class="s1">&#39;test&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id14">
<h4>权限控制<a class="headerlink" href="#id14" title="永久链接至标题"></a></h4>
<ol class="arabic">
<li><p>常用权限</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 51%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>权限</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ALL, ALL PRIVILEGES</p></td>
<td><p>所有权限</p></td>
</tr>
<tr class="row-odd"><td><p>SELECT</p></td>
<td><p>查询数据</p></td>
</tr>
<tr class="row-even"><td><p>INSERT</p></td>
<td><p>插入数据</p></td>
</tr>
<tr class="row-odd"><td><p>UPDATE</p></td>
<td><p>修改数据</p></td>
</tr>
<tr class="row-even"><td><p>DELETE</p></td>
<td><p>删除数据</p></td>
</tr>
<tr class="row-odd"><td><p>ALTER</p></td>
<td><p>修改表</p></td>
</tr>
<tr class="row-even"><td><p>DROP</p></td>
<td><p>删除数据库/表/视图</p></td>
</tr>
<tr class="row-odd"><td><p>CREATE</p></td>
<td><p>创建数据库/表</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>查询权限</p>
<p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">GRANTS</span> <span class="pre">FOR</span> <span class="pre">'用户名'&#64;'主机名';</span></code></p>
</li>
<li><p>授予权限</p>
<p><code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">权限列表</span> <span class="pre">ON</span> <span class="pre">数据库名.表名</span> <span class="pre">TO</span> <span class="pre">'用户名'&#64;'主机名';</span></code></p>
</li>
<li><p>撤销权限</p>
<p><code class="docutils literal notranslate"><span class="pre">REVOKE</span> <span class="pre">权限列表</span> <span class="pre">ON</span> <span class="pre">数据库名.表名</span> <span class="pre">FROM</span> <span class="pre">'用户名'&#64;'主机名';</span></code></p>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>多个权限用逗号分隔</p></li>
<li><p>授权时，数据库名和表名可以用 * 进行通配，代表所有</p></li>
</ul>
</div>
</section>
</section>
</section>
<section id="id15">
<h2>函数<a class="headerlink" href="#id15" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p>字符串函数</p></li>
<li><p>数值函数</p></li>
<li><p>日期函数</p></li>
<li><p>流程函数</p></li>
</ul>
<section id="id16">
<h3>字符串函数<a class="headerlink" href="#id16" title="永久链接至标题"></a></h3>
<ol class="arabic">
<li><p>常用函数</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CONCAT(s1, s2, …, sn)</p></td>
<td><p>字符串拼接，将s1, s2, …,
sn拼接成一个字符串</p></td>
</tr>
<tr class="row-odd"><td><p>LOWER(str)</p></td>
<td><p>将字符串全部转为小写</p></td>
</tr>
<tr class="row-even"><td><p>UPPER(str)</p></td>
<td><p>将字符串全部转为大写</p></td>
</tr>
<tr class="row-odd"><td><p>LPAD(str, n, pad)</p></td>
<td><p>左填充，用字符串pad
对str的左边进行填充，达到n个字符串长度</p></td>
</tr>
<tr class="row-even"><td><p>RPAD(str, n, pad)</p></td>
<td><p>右填充，用字符串pad
对str的右边进行填充，达到n个字符串长度</p></td>
</tr>
<tr class="row-odd"><td><p>TRIM(str)</p></td>
<td><p>去掉字符串头部和尾部的空格</p></td>
</tr>
<tr class="row-even"><td><p>SUBSTRING(str, start, len)</p></td>
<td><p>返回从字符
串str从start位置起的len个长度的字符串</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 拼接</span>
<span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="s1">&#39;World&#39;</span><span class="p">);</span>

<span class="c1">-- 小写</span>
<span class="k">SELECT</span> <span class="k">LOWER</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">);</span>

<span class="c1">-- 大写</span>
<span class="k">SELECT</span> <span class="k">UPPER</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">);</span>

<span class="c1">-- 左填充</span>
<span class="k">SELECT</span> <span class="n">LPAD</span><span class="p">(</span><span class="s1">&#39;01&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">);</span>

<span class="c1">-- 右填充</span>
<span class="k">SELECT</span> <span class="n">RPAD</span><span class="p">(</span><span class="s1">&#39;01&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">);</span>

<span class="c1">-- 去除空格</span>
<span class="k">SELECT</span> <span class="k">TRIM</span><span class="p">(</span><span class="s1">&#39; Hello World &#39;</span><span class="p">);</span>

<span class="c1">-- 切片（起始索引为1）</span>
<span class="k">SELECT</span> <span class="k">SUBSTRING</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id17">
<h3>数值函数<a class="headerlink" href="#id17" title="永久链接至标题"></a></h3>
<ol class="arabic">
<li><p>常见函数：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CEIL(x)</p></td>
<td><p>向上取整</p></td>
</tr>
<tr class="row-odd"><td><p>FLOOR(x)</p></td>
<td><p>向下取整</p></td>
</tr>
<tr class="row-even"><td><p>MOD(x, y)</p></td>
<td><p>返回x/y的模</p></td>
</tr>
<tr class="row-odd"><td><p>RAND()</p></td>
<td><p>返回0~1内的随机数</p></td>
</tr>
<tr class="row-even"><td><p>ROUND(x, y)</p></td>
<td><p>求参数x的四舍五入值，保留y位小数</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="id18">
<h3>日期函数<a class="headerlink" href="#id18" title="永久链接至标题"></a></h3>
<ol class="arabic">
<li><p>常见函数：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CURDATE()</p></td>
<td><p>返回当前日期</p></td>
</tr>
<tr class="row-odd"><td><p>CURTIME()</p></td>
<td><p>返回当前时间</p></td>
</tr>
<tr class="row-even"><td><p>NOW()</p></td>
<td><p>返回当前日期和时间</p></td>
</tr>
<tr class="row-odd"><td><p>YEAR(date)</p></td>
<td><p>获取指定date的年份</p></td>
</tr>
<tr class="row-even"><td><p>MONTH(date)</p></td>
<td><p>获取指定date的月份</p></td>
</tr>
<tr class="row-odd"><td><p>DAY(date)</p></td>
<td><p>获取指定date的日期</p></td>
</tr>
<tr class="row-even"><td><p>DATE_ADD(date, INTERVAL expr
type)</p></td>
<td><p>返回一个日期/时间
值加上一个时间间隔expr后的时间值</p></td>
</tr>
<tr class="row-odd"><td><p>DATEDIFF(date1, date2)</p></td>
<td><p>返回起始时
间date1和结束时间date2之间的天数</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- DATE_ADD</span>
<span class="k">SELECT</span> <span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span> <span class="nb">INTERVAL</span> <span class="mi">70</span> <span class="k">YEAR</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id19">
<h3>流程函数<a class="headerlink" href="#id19" title="永久链接至标题"></a></h3>
<ol class="arabic">
<li><p>常用函数:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IF(value, t, f)</p></td>
<td><p>如
果value为true，则返回t，否则返回f</p></td>
</tr>
<tr class="row-odd"><td><p>IFNULL(value1, value2)</p></td>
<td><p>如果value1不
为空，返回value1，否则返回value2</p></td>
</tr>
<tr class="row-even"><td><p>CASE WHEN [ val1 ] THEN [ res1 ]
… ELSE [ default ] END</p></td>
<td><p>如果val1为true，返回res1，…
否则返回default默认值</p></td>
</tr>
<tr class="row-odd"><td><p>CASE [ expr ] WHEN [ val1 ] THEN
[ res1 ] … ELSE [ default ] END</p></td>
<td><p>如果expr的值等于val1，返回res1，…
否则返回default默认值</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span>
   <span class="n">name</span><span class="p">,</span>
   <span class="p">(</span><span class="k">case</span> <span class="k">when</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">30</span> <span class="k">then</span> <span class="s1">&#39;中年&#39;</span> <span class="k">else</span> <span class="s1">&#39;青年&#39;</span> <span class="k">end</span><span class="p">)</span>
<span class="k">from</span> <span class="n">employee</span><span class="p">;</span>

<span class="k">select</span>
   <span class="n">name</span><span class="p">,</span>
   <span class="p">(</span><span class="k">case</span> <span class="n">workaddress</span> <span class="k">when</span> <span class="s1">&#39;北京市&#39;</span> <span class="k">then</span> <span class="s1">&#39;一线城市&#39;</span> <span class="k">when</span> <span class="s1">&#39;上海市&#39;</span> <span class="k">then</span> <span class="s1">&#39;一线城市&#39;</span> <span class="k">else</span> <span class="s1">&#39;二线城市&#39;</span> <span class="k">end</span><span class="p">)</span> <span class="k">as</span> <span class="s1">&#39;工作地址&#39;</span>
<span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="id20">
<h2>约束<a class="headerlink" href="#id20" title="永久链接至标题"></a></h2>
<section id="id21">
<h3>分类<a class="headerlink" href="#id21" title="永久链接至标题"></a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 41%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>约束</p></th>
<th class="head"><p>描述</p></th>
<th class="head"><p>关键字</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>非空约束</p></td>
<td><p>限
制该字段的数据不能为null</p></td>
<td><p>NOT NULL</p></td>
</tr>
<tr class="row-odd"><td><p>唯一约束</p></td>
<td><p>保证该字段的所
有数据都是唯一、不重复的</p></td>
<td><p>UNIQUE</p></td>
</tr>
<tr class="row-even"><td><p>主键约束</p></td>
<td><p>主键是一行数据的
唯一标识，要求非空且唯一</p></td>
<td><p>PRIMARY KEY</p></td>
</tr>
<tr class="row-odd"><td><p>默认约束</p></td>
<td><p>保存数据时，如果未指定
该字段的值，则采用默认值</p></td>
<td><p>DEFAULT</p></td>
</tr>
<tr class="row-even"><td><p>检查约束（8.0.1版本后）</p></td>
<td><p>保证字段值满足某一个条件</p></td>
<td><p>CHECK</p></td>
</tr>
<tr class="row-odd"><td><p>外键约束</p></td>
<td><p>用来让两
张图的数据之间建立连接，
保证数据的一致性和完整性</p></td>
<td><p>FOREIGN KEY</p></td>
</tr>
</tbody>
</table>
<p><strong>约束是作用于表中字段上的，可以再创建表/修改表的时候添加约束。</strong></p>
</div></blockquote>
</section>
<section id="id22">
<h3>常用约束<a class="headerlink" href="#id22" title="永久链接至标题"></a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>约束条件</p></th>
<th class="head"><p>关键字</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>主键</p></td>
<td><p>PRIMARY KEY</p></td>
</tr>
<tr class="row-odd"><td><p>自动增长</p></td>
<td><p>AUTO_INCREMENT</p></td>
</tr>
<tr class="row-even"><td><p>不为空</p></td>
<td><p>NOT NULL</p></td>
</tr>
<tr class="row-odd"><td><p>唯一</p></td>
<td><p>UNIQUE</p></td>
</tr>
<tr class="row-even"><td><p>逻辑条件</p></td>
<td><p>CHECK</p></td>
</tr>
<tr class="row-odd"><td><p>默认值</p></td>
<td><p>DEFAULT</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>e.g.</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">user</span><span class="p">(</span>
   <span class="n">id</span> <span class="nb">int</span> <span class="k">primary</span> <span class="k">key</span> <span class="n">auto_increment</span><span class="p">,</span>
   <span class="n">name</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span> <span class="k">unique</span><span class="p">,</span>
   <span class="n">age</span> <span class="nb">int</span> <span class="k">check</span><span class="p">(</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">and</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">120</span><span class="p">),</span>
   <span class="n">status</span> <span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
   <span class="n">gender</span> <span class="nb">char</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id23">
<h3>外键约束<a class="headerlink" href="#id23" title="永久链接至标题"></a></h3>
<blockquote>
<div><p><strong>添加外键</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">表名</span><span class="p">(</span>
   <span class="n">字段名</span> <span class="n">字段类型</span><span class="p">,</span>
   <span class="o">...</span>
   <span class="p">[</span><span class="n">CONSTRAINT</span><span class="p">]</span> <span class="p">[</span><span class="n">外键名称</span><span class="p">]</span> <span class="n">FOREIGN</span> <span class="n">KEY</span><span class="p">(</span><span class="n">外键字段名</span><span class="p">)</span> <span class="n">REFERENCES</span> <span class="n">主表</span><span class="p">(</span><span class="n">主表列名</span><span class="p">)</span>
<span class="p">);</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">表名</span> <span class="n">ADD</span> <span class="n">CONSTRAINT</span> <span class="n">外键名称</span> <span class="n">FOREIGN</span> <span class="n">KEY</span> <span class="p">(</span><span class="n">外键字段名</span><span class="p">)</span> <span class="n">REFERENCES</span> <span class="n">主表</span><span class="p">(</span><span class="n">主表列名</span><span class="p">);</span>
</pre></div>
</div>
<p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">alter</span> <span class="k">table</span> <span class="n">emp</span> <span class="k">add</span> <span class="k">constraint</span> <span class="n">fk_emp_dept_id</span> <span class="k">foreign</span> <span class="k">key</span><span class="p">(</span><span class="n">dept_id</span><span class="p">)</span> <span class="k">references</span> <span class="n">dept</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>删除外键</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="s1">&#39;表名&#39;</span> <span class="k">DROP</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="s1">&#39;外键名&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id24">
<h3>删除/更新行为<a class="headerlink" href="#id24" title="永久链接至标题"></a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>行为</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NO ACTION</p></td>
<td><p>当在父表中删除/更新对应记录时，首先检查该记录是否
有对应外键，如果有则不允许删除/更新（与RESTRICT一致）</p></td>
</tr>
<tr class="row-odd"><td><p>RESTRICT</p></td>
<td><p>当在父表中删除/更新对应记录时，首先检
查该记录是否有对应外键，如果有则不允许删除/更新（与NO
ACTION一致）</p></td>
</tr>
<tr class="row-even"><td><p>CASCADE</p></td>
<td><p>当在父表中删除/更新对应记录时，首先检查该记录
是否有对应外键，如果有则也删除/更新外键在子表中的记录</p></td>
</tr>
<tr class="row-odd"><td><p>SET NULL</p></td>
<td><p>当在父表中删
除/更新对应记录时，首先检查该记录是否有对应外键，如果
有则设置子表中该外键值为null（要求该外键允许为null）</p></td>
</tr>
<tr class="row-even"><td><p>SET DEFAULT</p></td>
<td><p>父
表有变更时，子表将外键设为一个默认值（Innodb不支持）</p></td>
</tr>
</tbody>
</table>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="s1">&#39;表名&#39;</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="s1">&#39;外键名称&#39;</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="s1">&#39;(外键字段)&#39;</span>
   <span class="k">REFERENCES</span> <span class="s1">&#39;主表名(主表字段名)&#39;</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="s1">&#39;行为&#39;</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="s1">&#39;行为&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- cascade:当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则也删除/更新外键在子表中的记录</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">emp</span> <span class="k">add</span> <span class="k">constraint</span> <span class="n">fk_emp_dept_id</span> <span class="k">foreign</span> <span class="k">key</span><span class="p">(</span><span class="n">department_id</span><span class="p">)</span> <span class="k">references</span> <span class="n">dept</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">on</span> <span class="k">update</span> <span class="k">cascade</span> <span class="k">on</span> <span class="k">delete</span> <span class="k">cascade</span><span class="p">;</span>

<span class="c1">-- setnull：当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（要求该外键允许为null）</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">emp</span> <span class="k">add</span> <span class="k">constraint</span> <span class="n">fk_emp_dept_id</span> <span class="k">foreign</span> <span class="k">key</span><span class="p">(</span><span class="n">department_id</span><span class="p">)</span> <span class="k">references</span> <span class="n">dept</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">on</span> <span class="k">update</span> <span class="k">set</span> <span class="k">null</span> <span class="k">on</span> <span class="k">delete</span> <span class="k">set</span> <span class="k">null</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="id25">
<h2>多表查询<a class="headerlink" href="#id25" title="永久链接至标题"></a></h2>
<section id="id26">
<h3>多表关系<a class="headerlink" href="#id26" title="永久链接至标题"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>一对多</p></li>
<li><p>多对多</p></li>
<li><p>多对一</p></li>
</ul>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>一对多</p>
<p>案例：部门与员工</p>
<p>关系：一个部门对应多个员工，一个员工对应一个部门</p>
<p>实现：在 <strong>多</strong> 的一方建立外键，指向 <strong>一</strong> 的一方的主键</p>
</li>
<li><p>多对多</p>
<p>案例：学生与课程</p>
<p>关系：一个学生可以选多门课程，一门课程也可以供多个学生选修</p>
<p>实现：<strong>建立第三张中间表</strong>，中间表至少包含两个外键，分别关联两方主键</p>
</li>
<li><p>一对一</p>
<p>案例：用户与用户详情</p>
<p>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率</p>
<p>实现：在任意一方加入外键，关联另外一方的主键，并且**设置外键为唯一（UNIQUE）**</p>
</li>
</ol>
</section>
<section id="id27">
<h3>查询<a class="headerlink" href="#id27" title="永久链接至标题"></a></h3>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">注解</p>
<p>笛卡尔积：两个集合A集合和B集合的所有组合情况（在多表查询时，需要消除无效的笛卡尔积）</p>
</div>
<p>合并查询（笛卡尔积，会展示所有组合结果）：</p>
<p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">employee,</span> <span class="pre">dept;</span></code></p>
<p>消除无效笛卡尔积：</p>
<p><code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">employee,</span> <span class="pre">dept</span> <span class="pre">where</span> <span class="pre">employee.dept</span> <span class="pre">=</span> <span class="pre">dept.id;</span></code></p>
</div></blockquote>
</section>
<section id="id28">
<h3>内连接查询<a class="headerlink" href="#id28" title="永久链接至标题"></a></h3>
<blockquote>
<div><p><strong>内连接查询的是两张表交集的部分</strong></p>
<p><strong>显式性能比隐式高</strong></p>
<ul>
<li><p>隐式内连接：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表1,</span> <span class="pre">表2</span> <span class="pre">WHERE</span> <span class="pre">条件</span> <span class="pre">...;</span></code></p>
</div></blockquote>
</li>
<li><p>显式内连接：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表1</span> <span class="pre">[</span> <span class="pre">INNER</span> <span class="pre">]</span> <span class="pre">JOIN</span> <span class="pre">表2</span> <span class="pre">ON</span> <span class="pre">连接条件</span> <span class="pre">...;</span></code></p>
</div></blockquote>
</li>
<li><p>e.g.</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询员工姓名，及关联的部门的名称</span>

<span class="c1">-- 隐式</span>
<span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">as</span> <span class="n">e</span><span class="p">,</span> <span class="n">dept</span> <span class="k">as</span> <span class="n">d</span> <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- 显式</span>
<span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">as</span> <span class="n">e</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">dept</span> <span class="k">as</span> <span class="n">d</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="id29">
<h3>外连接查询<a class="headerlink" href="#id29" title="永久链接至标题"></a></h3>
<blockquote>
<div><ul>
<li><p>左外连接:</p>
<blockquote>
<div><p><strong>查询左表所有数据，以及两张表交集部分数据</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表1</span> <span class="pre">LEFT</span> <span class="pre">[</span> <span class="pre">OUTER</span> <span class="pre">]</span> <span class="pre">JOIN</span> <span class="pre">表2</span> <span class="pre">ON</span> <span class="pre">条件</span> <span class="pre">...;</span></code></p>
</div></blockquote>
</li>
<li><p>右外连接:</p>
<blockquote>
<div><p><strong>查询右表所有数据，以及两张表交集部分数据</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表1</span> <span class="pre">RIGHT</span> <span class="pre">[</span> <span class="pre">OUTER</span> <span class="pre">]</span> <span class="pre">JOIN</span> <span class="pre">表2</span> <span class="pre">ON</span> <span class="pre">条件</span> <span class="pre">...;</span></code></p>
</div></blockquote>
</li>
<li><p>e.g.</p>
<blockquote>
<div><p>左连接可以查询到没有dept的employee，右连接可以查询到没有employee的dept</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 左外连接</span>
<span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="o">*</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">as</span> <span class="n">e</span> <span class="k">left</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">dept</span> <span class="k">as</span> <span class="n">d</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- 右外连接</span>
<span class="k">select</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">as</span> <span class="n">e</span> <span class="k">right</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">dept</span> <span class="k">as</span> <span class="n">d</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- 使用左外连接实现右外连接</span>
<span class="k">select</span> <span class="n">d</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="o">*</span> <span class="k">from</span> <span class="n">dept</span> <span class="n">d</span> <span class="k">left</span> <span class="k">outer</span> <span class="k">join</span> <span class="n">emp</span> <span class="n">e</span> <span class="k">on</span> <span class="n">e</span><span class="p">.</span><span class="n">dept</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="id30">
<h3>自连接查询<a class="headerlink" href="#id30" title="永久链接至标题"></a></h3>
<blockquote>
<div><p>当前表与自身的连接查询，自连接必须使用表别名。自连接查询可以是内连接查询，也可以是外连接查询。</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表A</span> <span class="pre">别名A</span> <span class="pre">JOIN</span> <span class="pre">表A</span> <span class="pre">别名B</span> <span class="pre">ON</span> <span class="pre">条件</span> <span class="pre">...;</span></code></p>
<p>e.g.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询员工及其所属领导的名字</span>
<span class="k">select</span> <span class="n">a</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">name</span> <span class="k">from</span> <span class="n">employee</span> <span class="n">a</span><span class="p">,</span> <span class="n">employee</span> <span class="n">b</span> <span class="k">where</span> <span class="n">a</span><span class="p">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>

<span class="c1">-- 没有领导的也查询出来</span>
<span class="k">select</span> <span class="n">a</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">name</span> <span class="k">from</span> <span class="n">employee</span> <span class="n">a</span> <span class="k">left</span> <span class="k">join</span> <span class="n">employee</span> <span class="n">b</span> <span class="k">on</span> <span class="n">a</span><span class="p">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id31">
<h3>联合查询<a class="headerlink" href="#id31" title="永久链接至标题"></a></h3>
<blockquote>
<div><p>把多次查询的结果合并，形成一个新的查询集</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表A</span> <span class="pre">...</span> <span class="pre">UNION</span> <span class="pre">[ALL]</span> <span class="pre">SELECT</span> <span class="pre">字段列表</span> <span class="pre">FROM</span> <span class="pre">表B</span> <span class="pre">...</span></code></p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>UNION ALL 会有重复结果，UNION 不会</p></li>
<li><p>联合查询比使用or效率高，不会使索引失效</p></li>
</ul>
</div>
</div></blockquote>
</section>
<section id="id32">
<h3>子查询<a class="headerlink" href="#id32" title="永久链接至标题"></a></h3>
<blockquote>
<div><p>SQL语句中嵌套SELECT语句，称谓嵌套查询，又称子查询。</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">t1</span> <span class="pre">WHERE</span> <span class="pre">column1</span> <span class="pre">=</span> <span class="pre">(</span> <span class="pre">SELECT</span> <span class="pre">column1</span> <span class="pre">FROM</span> <span class="pre">t2);</span></code></p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>子查询外部的语句可以是 <strong>INSERT / UPDATE / DELETE / SELECT</strong> 的任何一个</p>
</div>
<p>根据子查询结果可以分为：</p>
<blockquote>
<div><ul class="simple">
<li><p>标量子查询（子查询结果为单个值）</p></li>
<li><p>列子查询（子查询结果为一列）</p></li>
<li><p>行子查询（子查询结果为一行）</p></li>
<li><p>表子查询（子查询结果为多行多列）</p></li>
</ul>
</div></blockquote>
<p>根据子查询位置可分为：</p>
<blockquote>
<div><ul class="simple">
<li><p>WHERE 之后</p></li>
<li><p>FROM 之后</p></li>
<li><p>SELECT 之后</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<section id="id33">
<h4>标量子查询<a class="headerlink" href="#id33" title="永久链接至标题"></a></h4>
<blockquote>
<div><ul>
<li><p>返回的结果:</p>
<blockquote>
<div><p>单个值（数字、字符串、日期等）</p>
</div></blockquote>
</li>
<li><p>常用操作符:</p>
<blockquote>
<div><p>-, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=</p>
</div></blockquote>
</li>
<li><p>e.g.</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询销售部所有员工</span>
<span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">dept</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;销售部&#39;</span><span class="p">;</span>

<span class="c1">-- 根据销售部部门ID，查询员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">dept</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

<span class="c1">-- 合并（子查询）</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">dept</span> <span class="o">=</span> <span class="p">(</span><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">dept</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;销售部&#39;</span><span class="p">);</span>

<span class="c1">-- 查询xxx入职之后的员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">entrydate</span> <span class="o">&gt;</span> <span class="p">(</span><span class="k">select</span> <span class="n">entrydate</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="id34">
<h4>列子查询<a class="headerlink" href="#id34" title="永久链接至标题"></a></h4>
<blockquote>
<div><ul>
<li><p>返回的结果:</p>
<blockquote>
<div><p>一列（可以是多行）</p>
</div></blockquote>
</li>
<li><p>常用操作符:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>操作符</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IN</p></td>
<td><p>在指定的集合范围内，多选一</p></td>
</tr>
<tr class="row-odd"><td><p>NOT IN</p></td>
<td><p>不在指定的集合范围内</p></td>
</tr>
<tr class="row-even"><td><p>ANY</p></td>
<td><p>子查询返回列表中，有任意一个满足即可</p></td>
</tr>
<tr class="row-odd"><td><p>SOME</p></td>
<td><p>与ANY等同，使用SOME的地方都可以使用ANY</p></td>
</tr>
<tr class="row-even"><td><p>ALL</p></td>
<td><p>子查询返回列表的所有值都必须满足</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>e.g.</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询销售部和市场部的所有员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">dept</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">dept</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;销售部&#39;</span> <span class="k">or</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;市场部&#39;</span><span class="p">);</span>

<span class="c1">-- 查询比财务部所有人工资都高的员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="k">all</span><span class="p">(</span><span class="k">select</span> <span class="n">salary</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">dept</span> <span class="o">=</span> <span class="p">(</span><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">dept</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;财务部&#39;</span><span class="p">));</span>

<span class="c1">-- 查询比研发部任意一人工资高的员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="k">any</span> <span class="p">(</span><span class="k">select</span> <span class="n">salary</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">dept</span> <span class="o">=</span> <span class="p">(</span><span class="k">select</span> <span class="n">id</span> <span class="k">from</span> <span class="n">dept</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;研发部&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="id35">
<h4>行子查询<a class="headerlink" href="#id35" title="永久链接至标题"></a></h4>
<blockquote>
<div><ul>
<li><p>返回的结果:</p>
<blockquote>
<div><p>一行（可以是多列）</p>
</div></blockquote>
</li>
<li><p>常用操作符:</p>
<blockquote>
<div><p>=, &lt;, &gt;, IN, NOT IN</p>
</div></blockquote>
</li>
<li><p>e.g.</p>
<blockquote>
<div><div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 查询与xxx的薪资及直属领导相同的员工信息</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="p">(</span><span class="n">salary</span><span class="p">,</span> <span class="n">manager</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12500</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="p">(</span><span class="n">salary</span><span class="p">,</span> <span class="n">manager</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="k">select</span> <span class="n">salary</span><span class="p">,</span> <span class="n">manager</span> <span class="k">from</span> <span class="n">employee</span> <span class="k">where</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../mysql.html" class="btn btn-neutral float-left" title="🍑 Algorithm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../../ssm/ssm.html" class="btn btn-neutral float-right" title="SSM" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, linzzz.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>