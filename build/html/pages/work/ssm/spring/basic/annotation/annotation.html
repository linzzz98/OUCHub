<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. IOC/DIæ³¨è§£å¼€å‘ &mdash; OUCHub  æ–‡æ¡£</title>
      <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../_static/twemoji.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../_static/doctools.js"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="../../../../../../_static/twemoji.js"></script>
        <script src="../../../../../../_static/translations.js"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../../../../../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../../../../../search.html" />
    <link rel="next" title="7. æ³¨è§£çŸ¥è¯†ç‚¹" href="anno_knowledge.html" />
    <link rel="prev" title="5. å®¹å™¨" href="../container/container.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
            <a href="../../../../../../index.html" class="icon icon-home"> OUCHub
            <img src="../../../../../../_static/logo_1.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="åœ¨æ–‡æ¡£ä¸­æœç´¢" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">åŸºç¡€çŸ¥è¯†</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../knowledge/k_MH.html">ğŸ’Š Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../knowledge/k_CV.html">ğŸ¤ Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../knowledge/k_ML.html">ğŸ Machine Learning</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">è®ºæ–‡å­¦ä¹ </span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../paper/p_sfm.html">ğŸŠ Structure from Motion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../paper/p_slam.html">ğŸŠ SLAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../paper/p_pointcloud.html">ğŸ‹ Point Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../paper/p_BA.html">ğŸŠ Bundle Adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../paper/p_others.html">ğŸ’ Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">æºç è§£æ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code/colmap.html">ğŸ‘ Colmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code/theiasfm.html">ğŸ‘ TheiaSfM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../code/ba.html">ğŸ‘ Bundle Adjustment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ç®—æ³•å­¦ä¹ </span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../algorithm/algorithm.html">ğŸ‘ Algorithm</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">å·¥ä½œçŸ¥è¯†</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../work.html">ğŸ‘ Work</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../mysql/mysql.html">ğŸ‘ Algorithm</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../ssm.html">SSM</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../frame/frame.html">1. Springç³»ç»Ÿæ¶æ„å’Œæ ¸å¿ƒæ¦‚å¿µ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ioc/ioc.html">2. IocåŸºç¡€å…¥é—¨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../di/di.html">3. DIåŸºç¡€å…¥é—¨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../prop/prop.html">4. Propertiesæ–‡ä»¶</a></li>
<li class="toctree-l3"><a class="reference internal" href="../container/container.html">5. å®¹å™¨</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6. IOC/DIæ³¨è§£å¼€å‘</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bean">æ³¨è§£å¼€å‘å®šä¹‰bean</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">çº¯æ³¨è§£å¼€å‘æ¨¡å¼</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">ç®€å•æ•°æ®ç±»å‹æ³¨å…¥</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ioc-dibean">IOC/DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id5">æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id6">å¼•å…¥å¤–éƒ¨é…ç½®ç±»</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id7">æ€»ç»“</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="anno_knowledge.html">7. æ³¨è§£çŸ¥è¯†ç‚¹</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aop/aop.html">8. AOP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aop/aop_tran.html">9. AOPäº‹åŠ¡ç®¡ç†</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aop/aop_knowledge.html">10. AOPçŸ¥è¯†ç‚¹</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../maven/basic/maven.html">11. BASIC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../maven/advanced/maven.html">12. Maven</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../maven/pom_helper.html">13. POMæ–‡ä»¶</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">æ‚ä¸ƒæ‚å…«</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../others/o_others.html">ğŸº Others</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">OUCHub</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../../work.html">ğŸ‘ Work</a> &raquo;</li>
          <li><a href="../../../ssm.html">SSM</a> &raquo;</li>
      <li><span class="section-number">6. </span>IOC/DIæ³¨è§£å¼€å‘</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/pages/work/ssm/spring/basic/annotation/annotation.rst.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ioc-di">
<h1><span class="section-number">6. </span>IOC/DIæ³¨è§£å¼€å‘<a class="headerlink" href="#ioc-di" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h1>
<p>Springçš„IOC/DIå¯¹åº”çš„é…ç½®ä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œå¤æ‚çš„åœ°æ–¹åœ¨ <strong>é…ç½®æ–‡ä»¶</strong></p>
<p>Springçš„æ³¨è§£å¼€å‘ç”¨äºç®€åŒ–å¼€å‘</p>
<section id="bean">
<h2>æ³¨è§£å¼€å‘å®šä¹‰bean<a class="headerlink" href="#bean" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<ol class="arabic">
<li><p>åˆ é™¤åŸXMLé…ç½®</p></li>
<li><p>ç±»ä¸Šæ·»åŠ æ³¨è§£</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Component</span><span class="p">(</span><span class="s">&quot;bookDao&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookDaoImpl</span> <span class="kd">implements</span> <span class="n">BookDao</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;book dao save ...&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<p>æ³¨æ„: <code class="docutils literal notranslate"><span class="pre">&#64;Component</span></code> æ³¨è§£ä¸å¯ä»¥æ·»åŠ åœ¨æ¥å£ä¸Šï¼Œå› ä¸ºæ¥å£æ˜¯æ— æ³•åˆ›å»ºå¯¹è±¡çš„ã€‚</p>
</div>
<p><strong>XMLä¸æ³¨è§£é…ç½®çš„å¯¹åº”å…³ç³»</strong></p>
<figure class="align-center align-default">
<img alt="../../../../../../_images/154.jpg" src="../../../../../../_images/154.jpg" />
</figure>
</li>
<li><p>é…ç½®Springçš„æ³¨è§£åŒ…æ‰«æ</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;com.linzzz&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>base-packageæŒ‡å®šSpringæ¡†æ¶æ‰«æçš„åŒ…è·¯å¾„ï¼Œå®ƒä¼šæ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸­çš„æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ã€‚</p>
<ul class="simple">
<li><p>åŒ…è·¯å¾„è¶Šå¤š[å¦‚:com.linzzz.dao.impl]ï¼Œæ‰«æçš„èŒƒå›´è¶Šå°é€Ÿåº¦è¶Šå¿«</p></li>
</ul>
<ul class="simple">
<li><p>åŒ…è·¯å¾„è¶Šå°‘[å¦‚:com.linzzz],æ‰«æçš„èŒƒå›´è¶Šå¤§é€Ÿåº¦è¶Šæ…¢</p></li>
</ul>
<ul class="simple">
<li><p>ä¸€èˆ¬æ‰«æåˆ°é¡¹ç›®çš„ç»„ç»‡åç§°å³Mavençš„groupIdä¸‹[å¦‚:com.linzzz]å³å¯ã€‚</p></li>
</ul>
</div>
</li>
<li><p>è¿è¡Œç¨‹åº</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p><strong>è¯´æ˜:</strong></p>
<ul class="simple">
<li><p>BookServiceImplç±»æ²¡æœ‰èµ·åç§°ï¼Œæ‰€ä»¥åœ¨Appä¸­æ˜¯æŒ‰ç…§ç±»å‹æ¥è·å–beanå¯¹è±¡</p></li>
<li><p>&#64;Componentæ³¨è§£å¦‚æœä¸èµ·åç§°ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼å°±æ˜¯ <strong>å½“å‰ç±»åé¦–å­—æ¯å°å†™</strong> ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŒ‰ç…§åç§°è·å–ï¼Œå¦‚</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">BookService</span> <span class="n">bookService</span> <span class="o">=</span> <span class="p">(</span><span class="n">BookService</span><span class="p">)</span><span class="n">ctx</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;bookServiceImpl&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>å¯¹äº&#64;Componentæ³¨è§£ï¼Œè¿˜è¡ç”Ÿå‡ºäº†å…¶ä»–ä¸‰ä¸ªæ³¨è§£ <code class="docutils literal notranslate"><span class="pre">&#64;Controller``ï¼ˆè¡¨ç°å±‚ï¼‰</span> <span class="pre">ã€</span> <span class="pre">``&#64;Service</span></code> ï¼ˆä¸šåŠ¡å±‚ï¼‰ã€ <code class="docutils literal notranslate"><span class="pre">&#64;Repository</span></code> ï¼ˆæ•°æ®å±‚ï¼‰</p>
<figure class="align-center align-default">
<img alt="../../../../../../_images/237.jpg" src="../../../../../../_images/237.jpg" />
</figure>
</div>
</section>
<section id="id1">
<h2>çº¯æ³¨è§£å¼€å‘æ¨¡å¼<a class="headerlink" href="#id1" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<p>å°†é…ç½®æ–‡ä»¶applicationContext.xmlåˆ é™¤æ‰ï¼Œä½¿ç”¨ç±»æ¥æ›¿æ¢ã€‚</p>
<ol class="arabic">
<li><p>åˆ›å»ºé…ç½®ç±»</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>æ ‡è¯†è¯¥ç±»ä¸ºé…ç½®ç±»</p>
<p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ  <code class="docutils literal notranslate"><span class="pre">&#64;Configuration</span></code> æ³¨è§£ï¼Œå°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªé…ç½®ç±»,æ›¿æ¢ <code class="docutils literal notranslate"><span class="pre">applicationContext.xml</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>ç”¨æ³¨è§£æ›¿æ¢åŒ…æ‰«æé…ç½®</p>
<p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«ææ³¨è§£ <code class="docutils literal notranslate"><span class="pre">&#64;ComponentScan</span></code> æ›¿æ¢ <code class="docutils literal notranslate"><span class="pre">&lt;context:component-scan</span> <span class="pre">base-package=&quot;&quot;/&gt;</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;com.linzzz&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>åˆ›å»ºå¹¶æ‰§è¡Œ</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="p">(</span><span class="n">SpringConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<ol class="arabic">
<li><p>Javaç±»æ›¿æ¢Springæ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<figure class="align-center align-default">
<img alt="../../../../../../_images/325.jpg" src="../../../../../../_images/325.jpg" />
</figure>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;Configuration</span></code> æ³¨è§£ç”¨äºè®¾å®šå½“å‰ç±»ä¸ºé…ç½®ç±»</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;ComponentScan</span></code> æ³¨è§£ç”¨äºè®¾å®šæ‰«æè·¯å¾„ï¼Œ( <strong>æ­¤æ³¨è§£åªèƒ½æ·»åŠ ä¸€æ¬¡ï¼Œå¤šä¸ªæ•°æ®è¯·ç”¨æ•°ç»„æ ¼å¼</strong> )</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>@ComponentScan({com.linzzz.service&quot;,&quot;com.linzzz.dao&quot;})
</pre></div>
</div>
</li>
<li><p>è¯»å–Springæ ¸å¿ƒé…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨å¯¹è±¡åˆ‡æ¢ä¸ºè¯»å–Javaé…ç½®ç±»åˆå§‹åŒ–å®¹å™¨å¯¹è±¡</p>
<p>æ³¨æ„ï¼Œ ç±»ç”± <code class="docutils literal notranslate"><span class="pre">ClassPathXmlApplicationContext</span></code> æ¢æˆäº† <code class="docutils literal notranslate"><span class="pre">AnnotationConfigApplicationContext</span></code></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">//åŠ è½½é…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨</span>
<span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;applicationContext.xml&quot;</span><span class="p">);</span>

<span class="c1">//åŠ è½½é…ç½®ç±»åˆå§‹åŒ–å®¹å™¨</span>
<span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="p">(</span><span class="n">SpringConfig</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</div>
</section>
<section id="id2">
<h2>æ³¨è§£å¼€å‘beanä½œç”¨èŒƒå›´ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†<a class="headerlink" href="#id2" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<ol class="arabic">
<li><p>åœ¨å¯¹åº”çš„æ–¹æ³•ä¸Šæ·»åŠ `&#64;PostConstruct`å’Œ`&#64;PreDestroy`æ³¨è§£å³å¯</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">//åœ¨æ„é€ æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ›¿æ¢ init-method</span>
 <span class="nd">@PostConstruct</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;init ...&quot;</span><span class="p">);</span>
 <span class="p">}</span>

<span class="c1">//åœ¨é”€æ¯æ–¹æ³•ä¹‹å‰æ‰§è¡Œ,æ›¿æ¢ destroy-method</span>
 <span class="nd">@PreDestroy</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="p">()</span> <span class="p">{</span>
     <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;destroy ...&quot;</span><span class="p">);</span>
 <span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ol class="arabic">
<li><p>ä»JDK9ä»¥åjdkä¸­çš„javax.annotationåŒ…è¢«ç§»é™¤äº†ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£åˆšå¥½å°±åœ¨è¿™ä¸ªåŒ…ä¸­ã€‚</p>
<p>éœ€è¦å¯¼å…¥ä¸‹é¢çš„jaråŒ…</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>javax.annotation<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>javax.annotation-api<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</li>
<li><p>é”€æ¯æ–¹æ³•å¿…é¡»æ˜¯å•ä¾‹æ‰èƒ½æ‰§è¡Œï¼Œéå•ä¾‹ä¸æ‰§è¡Œé”€æ¯æ–¹æ³•</p></li>
</ol>
</div>
</section>
<section id="id3">
<h2>æ³¨è§£å¼€å‘ä¾èµ–æ³¨å…¥<a class="headerlink" href="#id3" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<ol class="arabic">
<li><p>æ³¨è§£å®ç°æŒ‰ç…§ç±»å‹æ³¨å…¥</p>
<p>åœ¨BookServiceImplç±»çš„bookDaoå±æ€§ä¸Šæ·»åŠ  <code class="docutils literal notranslate"><span class="pre">&#64;Autowired</span></code> æ³¨è§£</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ol class="arabic simple">
<li><p>&#64;Autowiredå¯ä»¥å†™åœ¨å±æ€§ä¸Šï¼Œä¹Ÿå¯ä¹Ÿå†™åœ¨setteræ–¹æ³•ä¸Šï¼Œæœ€ç®€å•çš„å¤„ç†æ–¹å¼æ˜¯ <strong>å†™åœ¨å±æ€§ä¸Šå¹¶å°†setteræ–¹æ³•åˆ é™¤</strong></p></li>
<li><p>è‡ªåŠ¨è£…é…åŸºäºåå°„è®¾è®¡åˆ›å»ºå¯¹è±¡å¹¶é€šè¿‡æš´åŠ›åå°„ä¸ºç§æœ‰å±æ€§è¿›è¡Œè®¾å€¼ï¼Œæ‰€ä»¥æ­¤å¤„æ— éœ€æä¾›setteræ–¹æ³•ã€‚</p></li>
</ol>
</div>
</li>
<li><p>æ³¨è§£å®ç°æŒ‰ç…§åç§°æ³¨å…¥</p>
<p>å¯¹åº”æ¥å£å¦‚æœæœ‰å¤šä¸ªå®ç°ç±»ï¼Œæ¯”å¦‚æ·»åŠ BookDaoImpl2ï¼Œæ­¤æ—¶ï¼ŒæŒ‰ç…§ç±»å‹æ³¨å…¥å°±æ— æ³•åŒºåˆ†åˆ°åº•æ³¨å…¥å“ªä¸ªå¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;Qualifier</span></code> æ³¨è§£ å¡«å…¥æ³¨å…¥çš„beançš„åç§°</p>
<p><strong>æŒ‰ç…§åç§°æ³¨å…¥</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Autowired</span>
<span class="nd">@Qualifier</span><span class="p">(</span><span class="s">&quot;bookDao1&quot;</span><span class="p">)</span>
<span class="kd">private</span> <span class="n">BookDao</span> <span class="n">bookDao</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>&#64;Qualifierä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»å’Œ&#64;Autowiredä¸€èµ·ä½¿ç”¨</strong></p>
</li>
</ol>
</section>
<section id="id4">
<h2>ç®€å•æ•°æ®ç±»å‹æ³¨å…¥<a class="headerlink" href="#id4" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<ol class="arabic">
<li><p>æŒ‰å€¼æ³¨å…¥</p>
<p>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;Value</span></code> æ³¨è§£ï¼Œå°†å€¼å†™å…¥æ³¨è§£çš„å‚æ•°ä¸­</p>
<p>æ³¨æ„æ•°æ®æ ¼å¼è¦åŒ¹é…ï¼Œå¦‚å°†â€abcâ€æ³¨å…¥ç»™intå€¼ï¼Œè¿™æ ·ç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;itheima&quot;</span><span class="p">)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>é…ç½®æ–‡ä»¶æ³¨å…¥</p>
<ul>
<li><p>resourceä¸‹å‡†å¤‡propertiesæ–‡ä»¶ï¼Œå¦‚jdbc.properties</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>name=zzz
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>ä½¿ç”¨æ³¨è§£åŠ è½½propertiesé…ç½®æ–‡ä»¶</p>
<blockquote>
<div><p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ  <code class="docutils literal notranslate"><span class="pre">&#64;PropertySource</span></code> æ³¨è§£</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>@Configuration
@ComponentScan(&quot;com.linzzz&quot;)
@PropertySource(&quot;jdbc.properties&quot;)
public class SpringConfig {}
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;Value</span></code> è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Value</span><span class="p">(</span><span class="s">&quot;${name}&quot;</span><span class="p">)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ul>
<li><p>å¦‚æœè¯»å–çš„propertiesé…ç½®æ–‡ä»¶æœ‰å¤šä¸ªï¼Œå¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;PropertySource</span></code> çš„å±æ€§æ¥æŒ‡å®šå¤šä¸ª</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>@PropertySource({&quot;jdbc.properties&quot;,&quot;xxx.properties&quot;})
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;PropertySource</span></code> æ³¨è§£å±æ€§ä¸­ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦ <code class="docutils literal notranslate"><span class="pre">*</span></code> ,è¿è¡Œä¼šæŠ¥é”™</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>@PropertySource({&quot;*.properties&quot;})
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;PropertySource</span></code> æ³¨è§£å±æ€§ä¸­å¯ä»¥æŠŠ <code class="docutils literal notranslate"><span class="pre">classpath:</span></code> åŠ ä¸Š,ä»£è¡¨ä»å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„æ‰¾æ–‡ä»¶</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>@PropertySource({&quot;classpath:jdbc.properties&quot;})
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</li>
</ol>
</section>
<section id="ioc-dibean">
<h2>IOC/DIæ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean<a class="headerlink" href="#ioc-dibean" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<p><strong>ä½¿ç”¨&#64;Beanæ³¨è§£</strong></p>
<section id="id5">
<h3>æ³¨è§£å¼€å‘ç®¡ç†ç¬¬ä¸‰æ–¹bean<a class="headerlink" href="#id5" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p>åœ¨é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="p">(){</span>
        <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="p">();</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setDriverClassName</span><span class="p">(</span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setUrl</span><span class="p">(</span><span class="s">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="s">&quot;123456&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">ds</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>åœ¨æ–¹æ³•ä¸Šæ·»åŠ  <code class="docutils literal notranslate"><span class="pre">&#64;Bean</span></code> æ³¨è§£</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="p">(){</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>&#64;Beanæ³¨è§£çš„ä½œç”¨æ˜¯å°†æ–¹æ³•çš„è¿”å›å€¼åˆ¶ä½œä¸ºSpringç®¡ç†çš„ä¸€ä¸ªbeanå¯¹è±¡</p>
</div>
</li>
</ol>
</div></blockquote>
</section>
<section id="id6">
<h3>å¼•å…¥å¤–éƒ¨é…ç½®ç±»<a class="headerlink" href="#id6" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h3>
<p>å¯¹äºæ•°æ®æºçš„bean,æ–°å»ºä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">JdbcConfig</span></code> é…ç½®ç±»å­˜æ”¾æ•°æ®æº</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span> <span class="p">{</span>
   <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">dataSource</span><span class="p">(){</span>
        <span class="n">DruidDataSource</span> <span class="n">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DruidDataSource</span><span class="p">();</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setDriverClassName</span><span class="p">(</span><span class="s">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setUrl</span><span class="p">(</span><span class="s">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="s">&quot;root&quot;</span><span class="p">);</span>
        <span class="n">ds</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="s">&quot;123456&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">ds</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>è¿™ä¸ªé…ç½®ç±»å¦‚ä½•èƒ½è¢«Springé…ç½®ç±»åŠ è½½åˆ°ï¼Œå¹¶åˆ›å»ºDataSourceå¯¹è±¡åœ¨IOCå®¹å™¨ä¸­?</strong></p>
<ol class="arabic">
<li><p>ä½¿ç”¨åŒ…æ‰«æå¼•å…¥</p>
<ul>
<li><p>åœ¨Springçš„é…ç½®ç±»ä¸Šæ·»åŠ åŒ…æ‰«æ</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="nd">@ComponentScan</span><span class="p">(</span><span class="s">&quot;com.linzzz.config&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>åœ¨JdbcConfigä¸Šæ·»åŠ é…ç½®æ³¨è§£</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span><span class="p">{</span>
   <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
<li><p>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;Import</span></code> å¼•å…¥</p>
<p>è¿™ç§æ–¹æ¡ˆå¯ä»¥ä¸ç”¨åŠ  <code class="docutils literal notranslate"><span class="pre">&#64;Configuration</span></code> æ³¨è§£ï¼Œä½†æ˜¯å¿…é¡»åœ¨Springé…ç½®ç±»ä¸Šä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">&#64;Import</span></code> æ³¨è§£æ‰‹åŠ¨å¼•å…¥éœ€è¦åŠ è½½çš„é…ç½®ç±»</p>
<ul>
<li><p>å»é™¤JdbcConfigç±»ä¸Šçš„æ³¨è§£</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>åœ¨Springé…ç½®ç±»ä¸­å¼•å…¥</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="c1">//@ComponentScan(&quot;com.itheima.config&quot;)</span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">JdbcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">æ³¨æ„</p>
<ul>
<li><p>æ‰«ææ³¨è§£å¯ä»¥ç§»é™¤</p></li>
<li><p>&#64;Importå‚æ•°éœ€è¦çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å¼•å…¥å¤šä¸ªé…ç½®ç±»ã€‚</p></li>
<li><p>&#64;Importæ³¨è§£åœ¨é…ç½®ç±»ä¸­åªèƒ½å†™ä¸€æ¬¡ï¼Œä¸‹é¢çš„æ–¹å¼æ˜¯ <strong>ä¸å…è®¸çš„</strong></p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="c1">//@ComponentScan(&quot;com.itheima.config&quot;)</span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">JdbcConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="nd">@Import</span><span class="p">(</span><span class="n">Xxx</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</li>
</ol>
</section>
</section>
<section id="id7">
<h2>æ€»ç»“<a class="headerlink" href="#id7" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">ïƒ</a></h2>
<figure class="align-center align-default">
<img alt="../../../../../../_images/422.jpg" src="../../../../../../_images/422.jpg" />
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../container/container.html" class="btn btn-neutral float-left" title="5. å®¹å™¨" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="anno_knowledge.html" class="btn btn-neutral float-right" title="7. æ³¨è§£çŸ¥è¯†ç‚¹" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2021, linzzz.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>