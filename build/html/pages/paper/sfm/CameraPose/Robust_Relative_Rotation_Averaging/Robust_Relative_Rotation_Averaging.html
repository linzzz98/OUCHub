

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>21. Robust Relative Rotation Averaging &mdash; OUCHub  æ–‡æ¡£</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/twemoji.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/language_data.js"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="../../../../../_static/twemoji.js"></script>
        <script src="../../../../../_static/translations.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="ç´¢å¼•" href="../../../../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../../../../search.html" />
    <link rel="next" title="22. Privacy Preserving Image Queries for Camera Localization" href="../Privacy_Image_Queries/Privacy_Image_Queries.html" />
    <link rel="prev" title="20. Efficient and Robust Large-Scale Rotation Averaging" href="../Efficient_Robust_Rotation_Averaging/Efficient_Robust_Rotation_Averaging.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> OUCHub
          

          
            
            <img src="../../../../../_static/logo_1.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="åœ¨æ–‡æ¡£ä¸­æœç´¢" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">åŸºç¡€çŸ¥è¯†</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge/k_MH.html">ğŸ’Š Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge/k_CV.html">ğŸ¤ Computer Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge/k_ML.html">ğŸ Machine Learning</a></li>
</ul>
<p class="caption"><span class="caption-text">è®ºæ–‡å­¦ä¹ </span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../p_sfm.html">ğŸŠ Structure from Motion</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/Structure-from-Motion_Revisited/Structure-from-Motion_Revisited.html">1. Structure-from-Motion Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/Hierarchical_Structure-And-Motion/Hierarchical_Structure-And-Motion.html">2. Hierarchical structure-and-motion recovery from uncalibrated images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/View-graph_SfM/View-graph_SfM.html">3. View-graph Selection Framework for SfM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/View-graph_Framework/View-graph_Framework.html">4. View-graph construction framework for robust and efficient structure-from-motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/MarkerSfM/MarkerSfM.html">5. Improved Structure from Motion Using Fiducial Marker Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Incremental/Privacy_SfM/Privacy_SfM.html">6. Privacy Preserving Structure-from-Motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/CSfM/CSfM.html">7. CSFM: COMMUNITY-BASED STRUCTURE FROM MOTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/Very_Large-Scale_Global_SfM/Very_Large-Scale_Global_SfM.html">8. Very Large-Scale Global SfM by Distributed Motion Averaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/GlobalSfM_SA/GlobalSfM_SA.html">9. Global Structure-from-Motion by Similarity Averaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/GlobalSfM_Application/GlobalSfM_Application.html">10. Global Structure-from-Motion and Its Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/Efficient_Initial_Pose-graph/Efficient_Initial_Pose-graph.html">11. Effcient Initial Pose-graph Generation for Global SfM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Global/Optimizing_the_Viewing_Graph/Optimizing_the_Viewing_Graph.html">12. Optimizing the Viewing Graph for Structure-from-Motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Hybrid/HSfM/HSfM.html">13. HSfM: Hybrid Structure-from-Motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LocalMethod/Hybrid/View_Graph_Construction/View_Graph_Construction.html">14. View-graph construction framework for robust and efficient structure-from-motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../A_Global_Linear_Method_for_Camera_Pose_Registration/A_Global_Linear_Method_for_Camera_Pose_Registration.html">15. A Global Linear Method for Camera Pose Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Robust_Rotation_and_Translation_Estimation/Robust_Rotation_and_Translation_Estimation.html">16. Robust Rotation and Translation Estimation in Multiview Reconstruction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../FivePoint_Relative_Pose_Problem/FivePoint_Relative_Pose_Problem.html">17. An Effcient Solution to the Five-Point Relative Pose Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Hybrid_Camera_Estimation/Hybrid_Camera_Estimation.html">18. Hybrid Camera Pose Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lie_Averaging/Lie_Averaging.html">19. Lie-Algebraic Averaging For Globally Consistent Motion Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Efficient_Robust_Rotation_Averaging/Efficient_Robust_Rotation_Averaging.html">20. Efficient and Robust Large-Scale Rotation Averaging</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">21. Robust Relative Rotation Averaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reduction-to-iteratively-reweighted-least-squares">21.1. Reduction to Iteratively Reweighted Least Squares</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimization-using-quasi-newton-method">21.2. Optimization using Quasi-Newton Method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Privacy_Image_Queries/Privacy_Image_Queries.html">22. Privacy Preserving Image Queries for Camera Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Privacy_Location/Privacy_Location.html">23. Privacy Preserving Image-Based Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Using _Many_Cameras_as_One/Using _Many_Cameras_as_One.html">24. Using Many Cameras as One</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DeepLearning/SfMLearner/SfMLearner.html">25. Unsupervised Learning of Depth and Ego-Motion from Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DeepLearning/DeepSfM/DeepSfM.html">26. DeepSFM: Structure From Motion Via Deep Bundle Adjustment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../p_pointcloud.html">ğŸ‹ Point Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../p_others.html">ğŸ’ Others</a></li>
</ul>
<p class="caption"><span class="caption-text">æºç è§£æ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/colmap.html">ğŸ‘ Colmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code/theiasfm.html">ğŸ‘ TheiaSfM</a></li>
</ul>
<p class="caption"><span class="caption-text">æ‚ä¸ƒæ‚å…«</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../others/o_others.html">ğŸº Others</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">OUCHub</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../p_sfm.html">ğŸŠ Structure from Motion</a> &raquo;</li>
        
      <li><span class="section-number">21. </span>Robust Relative Rotation Averaging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/pages/paper/sfm/CameraPose/Robust_Relative_Rotation_Averaging/Robust_Relative_Rotation_Averaging.rst.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="robust-relative-rotation-averaging">
<h1><span class="section-number">21. </span>Robust Relative Rotation Averaging<a class="headerlink" href="#robust-relative-rotation-averaging" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<p>SfM æ¢å¤ä¸‰ç»´ç‚¹äº‘å’Œç›¸æœºç»“æ„æœ€æµè¡Œçš„æ–¹æ³•æ˜¯BAçš„éçº¿æ€§ä¼˜åŒ–æ–¹æ³•ï¼Œå°†3Dç»“æ„å’Œç›¸æœºçš„ç”Ÿæˆæ¨¡å‹ä¸è§‚å¯Ÿåˆ°çš„åŒ¹é…å›¾åƒç‚¹ç›¸åŒ¹é…ã€‚BAçš„åŸç†æ˜¯æœ€å°åŒ–ç›¸æœºå¹³é¢ä¸Šçš„é‡æŠ•å½±è¯¯å·®ã€‚</p>
<p>ä½†æ˜¯ä½œä¸ºéçº¿æ€§ä¼˜åŒ–ç®—æ³•ï¼ŒBAéœ€è¦è‰¯å¥½çš„åˆå§‹åŒ–ï¼Œå› ä¸ºå®ƒåªä¿è¯æ”¶æ•›åˆ°å±€éƒ¨æœ€å°å€¼ï¼Œå¹¶ä¸”BAå—å¼‚å¸¸å€¼è¿‡å¤šé²æ£’æ€§ä¸è¶³å’Œæ— æ³•æ”¶æ•›çš„é—®é¢˜æ‰€å›°æ‰°ã€‚</p>
<p>ä½¿ç”¨ä¸¤å¸§ä¹‹é—´çš„å¯¹æå‡ ä½•ï¼Œåªèƒ½æ¢å¤ç¬¬äºŒä¸ªç›¸æœºç›¸å¯¹äºç¬¬ä¸€ä¸ªçš„èˆªå‘æ–¹å‘ï¼ˆheading directionï¼‰ï¼Œè€Œä¸æ˜¯å®ƒä»¬ä¹‹é—´å®é™…3D translation çš„æ¯”ä¾‹ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»¬çš„å¯¹æå‡ ä½•æ¢å¤ç›¸æœºå¯¹ä¹‹é—´çš„3Dç›¸å¯¹æ—‹è½¬ã€‚</p>
<p>å› æ­¤ï¼Œä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯é¦–å…ˆå•ç‹¬è§£å†³3Dæ—‹è½¬çš„è¿åŠ¨å¹³å‡é—®é¢˜ï¼Œç„¶ååœ¨3Då¹³ç§»çš„ä¼°è®¡ä¸­åˆ©ç”¨è¯¥è§£å†³æ–¹æ¡ˆã€‚ä¸€æ—¦è§£å†³äº†ç›¸æœºçš„è¿åŠ¨ï¼Œä½¿ç”¨å¤šè§†å›¾ä¸‰è§’å‰–åˆ†æ‰¾åˆ°3Dç»“æ„ç‚¹çš„ä½ç½®å°±æ˜æ˜¾å®¹æ˜“å¾—å¤šï¼Œè¿™ä¸ºBAæ±‚è§£æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„åˆå€¼ã€‚</p>
<p>æœ¬æ–‡ä»¥å‡ ä¸ªé‡è¦çš„æ–¹å¼æ¦‚æ‹¬å’Œæ”¹è¿›äº†ã€ŠEfficient and Robust Large-Scale Rotation Averagingã€‹ä¸­çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<div class="section" id="reduction-to-iteratively-reweighted-least-squares">
<h2><span class="section-number">21.1. </span>Reduction to Iteratively Reweighted Least Squares<a class="headerlink" href="#reduction-to-iteratively-reweighted-least-squares" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>æ–‡ç« å°†æœ€å°åŒ–ä»£ä»·å‡½æ•°ï¼š</p>
<div class="math notranslate nohighlight">
\[R_v = \mathop{argmin}_{\{R_1, R_2, Â·Â·Â·, R_N\}} \sum\limits_{(i,j)\in \varepsilon} \rho(d(R_{ij},R_jR_i^{-1}))\]</div>
<p>ç®€åŒ–ä¸ºè¿­ä»£ä¼˜åŒ–é—®é¢˜ã€‚ åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œè¿™ä¸ªä¼˜åŒ–é—®é¢˜éƒ½ä½¿ç”¨æ‹Ÿç‰›é¡¿æ³•è§£å†³ï¼Œä»è€Œå¾—åˆ°ä¸€ç§å¯¹å¼‚å¸¸å€¼æ—¢æœ‰æ•ˆåˆé²æ£’çš„æ•´ä½“å¹³å‡æ–¹æ³•ã€‚</p>
<p>ä¸Šé¢çš„ä»£ä»·å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥å†™ä¸ºï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
R_v &amp;=&amp; \mathop{argmin}_{\{R_1, R_2, Â·Â·Â·, R_N\}} \sum\limits_{(i,j)\in \varepsilon} \rho(d(R_{ij},R_jR_i^{-1}))\\
    &amp;=&amp; \mathop{argmin}_{\{R_1, R_2, Â·Â·Â·, R_N\}} \sum\limits_{(i,j)\in \varepsilon} \rho(||\omega(R_j^{-1}R_{ij}R_i)||)\\
    &amp;=&amp; \mathop{argmin}_{\{R_1, R_2, Â·Â·Â·, R_N\}} \sum\limits_{(i,j)\in \varepsilon} \rho(||\omega(\Delta R_{ij})||)\\
\end{eqnarray}\end{split}\]</div>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\(\Delta R_{ij} = R_j^{-1} R_{ij} R_i\)</span> ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç»™å®šæ—‹è½¬ <span class="math notranslate nohighlight">\(R_v\)</span> çš„å½“å‰ä¼°è®¡å€¼ï¼Œå¯¹äºæ‘„åƒæœºï¼ˆ <span class="math notranslate nohighlight">\(V\)</span> ä¸­çš„é¡¶ç‚¹ï¼‰ï¼Œ<span class="math notranslate nohighlight">\(||\Delta R_{ij}||\)</span>  è¡¨ç¤º <span class="math notranslate nohighlight">\(R_{ij}\)</span> çš„æ‘„åƒæœº  <span class="math notranslate nohighlight">\(i\)</span>  å’Œ  <span class="math notranslate nohighlight">\(j\)</span>  ä¹‹é—´è§‚å¯Ÿåˆ°çš„ç›¸å¯¹æ—‹è½¬ <span class="math notranslate nohighlight">\(R_{ij}\)</span> ä¸å½“å‰ç”¨ <span class="math notranslate nohighlight">\(R_jR_i^{-1}\)</span> æ‰€ä¼°è®¡ç›¸å¯¹æ—‹è½¬ä¹‹é—´çš„å·®å¼‚</p>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>åœ¨æä»£æ•°è¡¨ç¤ºä¸­é€‰æ‹©canonicalæˆ–æ¬§å‡ é‡Œå¾—åº¦é‡ä¼šå¯¹æ—‹è½¬ç¾¤ SO(3) ä¸Šæµ‹åœ°çº¿è·ç¦»è¿›è¡Œç›´è§‚å®šä¹‰ã€‚è¿™ä¸ªè·ç¦»å¾ˆå®¹æ˜“é€šè¿‡ç†Ÿæ‚‰çš„ 3D æ—‹è½¬è½´è§’åº¦å‚æ•°åŒ–æ¥æŒ‡å®šã€‚</p>
<p>åœ¨è½´è§’å½¢å¼ä¸­ï¼Œ <span class="math notranslate nohighlight">\(3 \times 1\)</span> çŸ¢é‡ <span class="math notranslate nohighlight">\(\omega\)</span> è¡¨ç¤ºè§’  <span class="math notranslate nohighlight">\(||\omega||\)</span>  ç»•è½´ <span class="math notranslate nohighlight">\(\omega / ||\omega||\)</span> æ—‹è½¬ã€‚</p>
<p>æ—‹è½¬çŸ©é˜µ <span class="math notranslate nohighlight">\(R\)</span> ä¸å…¶è½´è§’ <span class="math notranslate nohighlight">\(\omega\)</span> ä¹‹é—´çš„å…³ç³»ç”±ä¸‹å¼ç»™å‡ºï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
   &amp;&amp;R &amp;=&amp; exp([\omega]_x)\\
   &amp;&amp;[\omega]_x &amp;=&amp; log(R)
\end{eqnarray}\end{split}\]</div>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\([\omega]_x\)</span> æ˜¯ <span class="math notranslate nohighlight">\(\omega\)</span> çš„åå¯¹ç§°çŸ©é˜µï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}[\omega]_x = \left[
\begin{matrix}
0 &amp; -\omega_3 &amp; \omega_2\\
\omega_3 &amp; 0 &amp; -\omega_1\\
-\omega_2 &amp; \omega_1 &amp; 0
\end{matrix}
\right]\end{split}\]</div>
<p>åå¯¹ç§°çŸ©é˜µ <span class="math notranslate nohighlight">\([\omega]_x\)</span> å®šä¹‰äº†æ—‹è½¬ç¾¤ SO(3) çš„æä»£æ•°ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼š</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(R(\omega)\)</span>  è¡¨ç¤ºé€šè¿‡åº”ç”¨äº  <span class="math notranslate nohighlight">\([\omega]_x \in so(3)\)</span> çš„æŒ‡æ•°æ˜ å°„è·å¾—çš„ 3D æ—‹è½¬ï¼›</p></li>
<li><p><span class="math notranslate nohighlight">\(\omega(R)\)</span> è¡¨ç¤ºä» <span class="math notranslate nohighlight">\(R \in SO(3)\)</span> ä¸­æå–çš„  <span class="math notranslate nohighlight">\(\omega\)</span> çš„ <span class="math notranslate nohighlight">\(3 \times 1\)</span>  çš„å‘é‡ã€‚</p></li>
</ul>
<p>å¯¹äºç»•ä¸åŒè½´çš„ä¸¤ä¸ª 3D æ—‹è½¬ï¼Œ <span class="math notranslate nohighlight">\(R(\omega_1) R(\omega_2) \ne R(\omega_1 + \omega_2)\)</span></p>
<p>åè€Œï¼Œ <span class="math notranslate nohighlight">\(R(\omega_1) R(\omega_2) = R(BCH(\omega_1, \omega_2))\)</span> ï¼Œå…¶ä¸­ <span class="math notranslate nohighlight">\(BCH(Â·,Â·)\)</span> æ˜¯Baker-Campbell-Hausdorff å½¢å¼ï¼Œè¡¨ç¤ºä¸ºä¸¤ä¸ªæä»£æ•°é¡¹ <span class="math notranslate nohighlight">\(\omega_1\)</span> å’Œ  <span class="math notranslate nohighlight">\(\omega_2\)</span>  çš„çº§æ•°ã€‚</p>
<p>å¯¹äºæ—‹è½¬ç¾¤ SO(3)ï¼ŒBCH çº§æ•°æœ‰ä¸€ä¸ªé—­å¼è¡¨è¾¾å¼  <span class="math notranslate nohighlight">\(BCH(\omega_1,\omega_2) = \alpha \omega_1 + \beta \omega_2 + \gamma \omega_1 \times \omega_2\)</span> ï¼Œå…¶ä¸­æ ‡é‡  <span class="math notranslate nohighlight">\(\alpha,\beta,\gamma\)</span>  æ˜¯  <span class="math notranslate nohighlight">\(\omega_1,\omega_2\)</span> çš„å‡½æ•°ã€‚</p>
<p>ç”±äºSO(3) ä¸Šçš„è·ç¦»åº¦é‡æœ¬è´¨ä¸Šæ˜¯bi-invariantçš„ï¼Œæ‰€ä»¥æœ‰ï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
&amp;&amp; d(R_1,R_2) = d(R_2,R_1) = d(I,R_2R_1^{-1})\\
&amp;=&amp; \frac{1}{\sqrt{2}} ||log(R_2R_1^{-1})||_F = ||\omega(R_2R_1^{-1}||\\
&amp;=&amp; ||BCH(\omega_2,-\omega_1)||
\end{eqnarray}\end{split}\]</div>
<p>ä»è€Œï¼š<span class="math notranslate nohighlight">\(d(R_{ij},R_jR_i^{-1}) = ||\omega(R_j^{-1}R_{ij}R_i)||\)</span></p>
</div>
<p>ä¸‹é¢è€ƒè™‘ä¸€ç§è¿­ä»£æ–¹æ³•æ¥æœ€å°åŒ–çš„ç›®æ ‡å‡½æ•°ã€‚</p>
<p>ä»¤å½“å‰å¯¹ <span class="math notranslate nohighlight">\(R_v\)</span> çš„ä¼°è®¡ä¸º <span class="math notranslate nohighlight">\(\{R_1,Â·Â·Â·,R_N\}\)</span> ï¼Œåœ¨å½“å‰çš„è¿­ä»£ä¸­ã€å¯¹ <span class="math notranslate nohighlight">\(R_v\)</span> è¿›è¡Œæ›´æ–°æ¥ä½¿æŸå¤±å‡½æ•°çš„å€¼ä¸‹é™ã€‚</p>
<p>ä»¤æ­¤æ¬¡æ›´æ–°ä¸º <span class="math notranslate nohighlight">\(\{\Delta R_1, Â·Â·Â·, \Delta R_N\}\)</span> ï¼Œåˆ™æ›´æ–°åçš„ <span class="math notranslate nohighlight">\(R_v\)</span> ä¸º <span class="math notranslate nohighlight">\(\{R_1\Delta R_1, Â·Â·Â·, R_N\Delta R_N\}\)</span> ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç»™å®šçš„è¿­ä»£ä¸­ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–ï¼š</p>
<div class="math notranslate nohighlight">
\[\sum\limits_{(i,j) \in \varepsilon} \rho (||\omega(\Delta R_j^{-1} \Delta R_{ij} \Delta R_i)||)\]</div>
<p>å¯¹äºæ¯ä¸ªå•ç‹¬çš„æ—‹è½¬æ›´æ–° <span class="math notranslate nohighlight">\(\Delta R_i\)</span> ï¼Œå¯¹äºæ‰€æœ‰ <span class="math notranslate nohighlight">\(i \in \{1,Â·Â·Â·,N\}\)</span> ï¼Œè®©ç­‰æ•ˆçš„è½´è§’è¡¨ç¤ºè¡¨ç¤ºä¸º <span class="math notranslate nohighlight">\(\Delta \omega_i\)</span> ã€‚</p>
<p>å°†æ‰€æœ‰è¿™äº›å‘é‡æ”¾åˆ°ä¸€ä¸ª  <span class="math notranslate nohighlight">\(3 N \times 1\)</span>  çš„å‘é‡  <span class="math notranslate nohighlight">\(\Delta \Omega_v = [\Delta \omega^T_1, Â·Â·Â·, \Delta \omega^T_N]^T\)</span> ä¸­ã€‚</p>
<p>å¯¹äºæ¯ä¸ªæ®‹å·®æ—‹è½¬é¡¹  <span class="math notranslate nohighlight">\(\Delta R_{ij}\)</span> æ¥è¯´ ï¼Œæ‰€æœ‰çš„ <span class="math notranslate nohighlight">\((i,j)\in \varepsilon\)</span> ï¼Œç­‰æ•ˆè½´è§’è¡¨ç¤ºä¸º <span class="math notranslate nohighlight">\(\Delta \omega_{ij}\)</span> ã€‚</p>
<p>æ‰€æœ‰è¿™äº›å‘é‡ä¸²è”æˆä¸€ä¸ª <span class="math notranslate nohighlight">\(3 M \times 1\)</span> çš„å‘é‡è¡¨ç¤ºä¸º <span class="math notranslate nohighlight">\(\Delta \Omega_\varepsilon\)</span></p>
<p>é‚£ä¹ˆä¸Šé¢çš„ç­‰å¼å°±ç­‰ä»·äºæ‰¾åˆ°æœ€å°åŒ–æˆæœ¬å‡½æ•° <span class="math notranslate nohighlight">\(F(\Delta \Omega_v)\)</span> çš„ <span class="math notranslate nohighlight">\(\Delta \Omega_v\)</span> ï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
   F(\Delta \Omega_v) &amp;=&amp; \sum\limits_{(i,j) \in \varepsilon} \rho(||\omega (R(-\Delta \omega_j)R(\Delta \omega_{ij}) R(\Delta \omega_j))||)\\
   &amp;=&amp; \sum\limits_{(i,j) \in \varepsilon} \rho(||r_{ij} (\Delta \Omega_v)||)
\end{eqnarray}\end{split}\]</div>
<p>å…¶ä¸­:</p>
<div class="math notranslate nohighlight">
\[r_{ij}(\Delta \Omega_v) = \omega (R(-\Delta \omega_j)R(\Delta \omega_{ij}) R(\Delta \omega_j))\]</div>
<p>æ¢¯åº¦ <span class="math notranslate nohighlight">\(F(\Delta \Omega_v)\)</span> ç”±ä¸‹é¢çš„å¼å­ç»™å‡ºï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
\nabla F(\Delta \Omega_v) &amp;=&amp; \sum\limits_{(i,j) \in \varepsilon} \nabla \rho(||r_{ij}(\Delta \Omega_v)||)\\
&amp;=&amp; \sum\limits_{(i,j) \in \varepsilon} \psi(||r_{ij} (\Delta \Omega_v)||) \nabla (||r_{ij}(\Delta \Omega_v)||)
\end{eqnarray}\end{split}\]</div>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\(\psi(r) = \frac{\partial \rho(r)}{\partial  r}\)</span> ç§°ä¸º influence functionã€‚</p>
<p>å®šä¹‰ <span class="math notranslate nohighlight">\(\phi(||r_{ij}(\Delta \Omega_v)||) = \frac{\psi(||r_{ij} (\Delta \Omega_v)||)}{||r_{ij} (\Delta \Omega_v)||}\)</span></p>
<p>ä»è€Œæœ‰ï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
&amp;&amp; F(\Delta \Omega_v)\\
&amp;=&amp; \frac{1}{2} \sum\limits_{(i,j) \in \varepsilon} \phi(||r_{ij}(\Delta \Omega_v)||)2||r_{ij}(\Delta \Omega_v)|| \nabla(||r_{ij}(\Delta \Omega_v)||)\\
&amp;=&amp; \frac{1}{2}  \sum\limits_{(i,j) \in \varepsilon} \phi(||r_{ij}(\Delta \Omega_v)||) \nabla(||r_{ij}(\Delta \Omega_v)||^2)
\end{eqnarray}\end{split}\]</div>
<p>å¯ä»¥é€šè¿‡å°† <span class="math notranslate nohighlight">\(\nabla F(\Delta \Omega_v)\)</span> ç­‰äºé›¶æ¥æ‰¾åˆ°æœ€ä½³çš„ <span class="math notranslate nohighlight">\(\Delta \Omega_v\)</span> ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œä½¿ç”¨ <strong>IRLSä¼˜åŒ–</strong> ï¼Œå› æ­¤ï¼Œåœ¨æ¯æ¬¡è¿­ä»£æœŸé—´ï¼Œå°†  <span class="math notranslate nohighlight">\(\phi(||r_{ij}(\Delta \Omega_v)||)\)</span> è§†ä¸ºç”± <span class="math notranslate nohighlight">\(\phi(||r_{ij}(0)||)\)</span> ç»™å‡ºçš„å¸¸æ•°ã€‚</p>
<p>è®° <span class="math notranslate nohighlight">\(\phi(||r_{ij}(0)||)\)</span> ä¸º <span class="math notranslate nohighlight">\(\phi_{ij}\)</span> ï¼Œåˆ™é—®é¢˜å˜ä¸ºï¼š</p>
<div class="math notranslate nohighlight">
\[\sum\limits_{(i,j) \in \varepsilon} \phi_{ij} Â·  \nabla(||r_{ij}(\Delta \Omega_v)||^2 = 0\]</div>
<p>ç­‰ä»·äºä¸‹é¢çš„æœ€å°åŒ–é—®é¢˜ï¼š</p>
<div class="math notranslate nohighlight">
\[\mathop{minimize}_{\Delta \Omega_v} \sum\limits_{(i,j)\in \varepsilon} \phi_{ij} ||r_{ij}(\Delta \Omega_v)||^2\]</div>
<p>æƒé‡  <span class="math notranslate nohighlight">\(\phi_{ij} = \phi(||r_{ij}(0)||)\)</span> æ˜¯åœ¨æ¯æ¬¡è¿­ä»£æ—¶ä¸ºæ¯æ¡è¾¹ <span class="math notranslate nohighlight">\((i,j) \in \varepsilon\)</span> è®¡ç®—çš„ã€‚</p>
<p>è‡³æ­¤ï¼Œå·²å°†ç›¸å¯¹æ—‹è½¬å¹³å‡é—®é¢˜ç®€åŒ–ä¸ºè¿­ä»£é‡æ–°åŠ æƒçš„éçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ã€‚ ç°åœ¨å°†çœ‹åˆ°å¦‚ä½•åœ¨æ¯æ¬¡è¿­ä»£ä¸­ä½¿ç”¨æ‹Ÿç‰›é¡¿æ³•è§£å†³åŠ æƒéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ã€‚</p>
</div>
<div class="section" id="optimization-using-quasi-newton-method">
<h2><span class="section-number">21.2. </span>Optimization using Quasi-Newton Method<a class="headerlink" href="#optimization-using-quasi-newton-method" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åœ¨æ‹Ÿç‰›é¡¿ä¼˜åŒ–æ–¹æ³•ä¸­ï¼Œä»£ä»·å‡½æ•°çš„ Hessian è¿‘ä¼¼ä¸ºæ­£åŠå®šçŸ©é˜µã€‚åœ¨é«˜æ–¯-ç‰›é¡¿ç®—æ³•çš„æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå‡½æ•°åœ¨ä¸€é˜¶æ„ä¹‰ä¸Šè¢«å±€éƒ¨é€¼è¿‘ï¼Œå› æ­¤ä¼˜åŒ–é—®é¢˜å½’ç»“ä¸ºçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ã€‚</p>
<p>æ–¹ç¨‹ <span class="math notranslate nohighlight">\(\sum\limits_{(i,j) \in \varepsilon} \phi_{ij} Â·  \nabla(||r_{ij}(\Delta \Omega_v)||^2 = 0\)</span> ç­‰ä»·äº</p>
<div class="math notranslate nohighlight">
\[\mathop{minimize}_{\Delta \Omega_v} \sum\limits_{(i,j) \in \varepsilon} \phi_{ij} Â· ||r_{ij}(0) + \mathbb{J} r_{ij}(0)^T \Delta \Omega_v||^2\]</div>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\(\mathbb{J}_{ij}(0)\)</span> æ˜¯å½“å‰ç‚¹ <span class="math notranslate nohighlight">\(\Delta \Omega_v = 0\)</span> å¤„  <span class="math notranslate nohighlight">\(r_{ij}(\Delta \Omega_v)\)</span>  çš„é›…å¯æ¯”çŸ©é˜µï¼ˆç›¸å¯¹äºè¦ä¼°è®¡çš„æœªçŸ¥æ•° <span class="math notranslate nohighlight">\(\Delta \Omega_v\)</span>ï¼‰ã€‚</p>
<p>æœ€å°åŒ–ä¸Šé¢å…¬å¼ä¸­çš„costç­‰æ•ˆäºåœ¨æœ€å°äºŒä¹˜æ„ä¹‰ä¸Šæ±‚è§£ä»¥ä¸‹çº¿æ€§æ–¹ç¨‹ç»„ï¼š</p>
<div class="math notranslate nohighlight">
\[\sqrt{\phi_{ij}} \mathbb{J} r_{ij}(0)^T \Delta \Omega_v = - \sqrt{\phi_{ij}} r_{ij} (0)~~ \forall(i,j) \in \varepsilon\]</div>
<p>ä»ç­‰å¼ <span class="math notranslate nohighlight">\(r_{ij}(\Delta \Omega_v) = \omega (R(-\Delta \omega_j)R(\Delta \omega_{ij}) R(\Delta \omega_j))\)</span> å¯çŸ¥ï¼Œ <span class="math notranslate nohighlight">\(r_{ij}(0) = \Delta \omega_{ij}\)</span></p>
<p>è¿‡å¯¹é™„å½•ä¸­çš„æˆæœ¬å‡½æ•°è¿›è¡Œå¾®åˆ†ï¼Œæ¨å¯¼å‡ºäº† <span class="math notranslate nohighlight">\(\mathbb{J} r_{ij}(0)\)</span> çš„å½¢å¼ï¼Œå› æ­¤æœ‰ï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{eqnarray}
\mathbb{J} r_{ij}(0) = &amp;&amp;\alpha_{ij} \underbrace{[Â·Â·Â·+IÂ·Â·Â·-IÂ·Â·Â·]}_{A_{ij}}\\
&amp;&amp; + (1-\alpha_{ij}) \underbrace{[Â·Â·Â·+\frac{\Delta \omega_{ij} \Delta \omega_{ij}^T}{\theta^2_{ij}}Â·Â·Â·-\frac{\Delta \omega_{ij} \Delta \omega_{ij}^T}{\theta^2_{ij}}Â·Â·Â·]}_{B_{ij}}\\
&amp;&amp; + \frac{1}{2} \underbrace{[Â·Â·Â·+[\Delta \omega_{ij}]_x Â·Â·Â· + [\Delta \omega_{ij}]_x Â·Â·Â·]}_{C_{ij}}
\end{eqnarray}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>è¯æ˜å¦‚ä¸‹ï¼š</p>
<p>è€ƒè™‘ä¸¤ä¸ªæ—‹è½¬ <span class="math notranslate nohighlight">\(u,v\)</span> çš„è½´è§’å½¢å¼ <span class="math notranslate nohighlight">\(\theta = ||u||,\varphi = ||v||\)</span></p>
<p>ä»–ä»¬çš„å››å…ƒæ•°å½¢å¼åˆ†åˆ«æ˜¯ <span class="math notranslate nohighlight">\([cos(\frac{\theta}{2}), \frac{g(\theta)}{2} u]\)</span> å’Œ  <span class="math notranslate nohighlight">\([cos(\frac{\phi}{2}), \frac{g(\phi)}{2} v]\)</span></p>
<p>å…¶ä¸­ï¼š</p>
<div class="math notranslate nohighlight">
\[\begin{split}g(x) = \begin{cases}
\frac{sin(x/2)}{x/2}~~~if~x \ne 0\\
~~~~~1~~~~~~~~if~x = 0
\end{cases}\end{split}\]</div>
<p>è¯·æ³¨æ„ï¼Œ<span class="math notranslate nohighlight">\(g(0) = 0\)</span> ï¼Œ <span class="math notranslate nohighlight">\(u\)</span>  åœ¨  <span class="math notranslate nohighlight">\(v\)</span>  ä¹‹åè¿ç®—çš„ç»„åˆå¯ä»¥ä½¿ç”¨å››å…ƒæ•°ä¹˜æ³•è§„åˆ™å†™ä¸ºï¼š <span class="math notranslate nohighlight">\([(cos(\frac{\theta}{2}) cos(\frac{\phi}{2}) - \frac{g(\theta) g(\phi)}{4} u^Tv), (a \frac{u}{2}+b \frac{v}{2} + c \frac{u \times v}{4})]\)</span></p>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\(a = cos(\frac{\phi}{2})g(\theta); b = cos(\frac{\theta}{2}) g(\phi), c = g(\theta) g(\phi)\)</span></p>
<p>å°† <span class="math notranslate nohighlight">\(u\)</span> åœ¨ <span class="math notranslate nohighlight">\(v\)</span> ä¹‹åæ“ä½œçš„è¿™ç§ç»„åˆçš„è½´è§’è¡¨ç¤ºè¡¨ç¤ºä¸º <span class="math notranslate nohighlight">\(w\)</span> ï¼Œå³ <span class="math notranslate nohighlight">\(w = uâ—¦v\)</span> ã€‚</p>
<p>ä»¤ <span class="math notranslate nohighlight">\(\psi = ||w||\)</span> ï¼Œå› æ­¤ <span class="math notranslate nohighlight">\(sin(\frac{\psi}{2})\frac{w}{\psi} = a \frac{u}{2} + b\frac{v}{2} + c \frac{u \times v}{4}\)</span></p>
<p>å¯¹äº <span class="math notranslate nohighlight">\(\theta &lt; \pi\)</span> å’Œè¶³å¤Ÿå°çš„ <span class="math notranslate nohighlight">\(\phi\)</span> ï¼Œ <span class="math notranslate nohighlight">\([(cos(\frac{\theta}{2}) cos(\frac{\phi}{2}) - \frac{g(\theta) g(\phi)}{4} u^Tv)\)</span> æ˜¯éè´Ÿçš„ï¼Œå¯ä»¥å†™æˆï¼š</p>
<div class="math notranslate nohighlight">
\[\]</div>
<p>w = 2 frac{sin^{-1}(d)}{d} (a frac{u}{2} + b frac{v}{2} + c frac{u times v}{4}</p>
<p>å…¶ä¸­ <span class="math notranslate nohighlight">\(d = ||a \frac{u}{2} + b \frac{v}{2} + c \frac{u \times v}{4}\)</span></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../Privacy_Image_Queries/Privacy_Image_Queries.html" class="btn btn-neutral float-right" title="22. Privacy Preserving Image Queries for Camera Localization" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../Efficient_Robust_Rotation_Averaging/Efficient_Robust_Rotation_Averaging.html" class="btn btn-neutral float-left" title="20. Efficient and Robust Large-Scale Rotation Averaging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; ç‰ˆæƒæ‰€æœ‰ 2021, linzzz.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>